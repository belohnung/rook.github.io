












































<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />

    
    <meta name="robots" content="noindex">
    

    <title>Ceph Docs</title>

    <link rel="canonical" href="https://rook.io/docs/rook/v0.6/k8s-pre-reqs.html">

    <link rel="icon" href="/favicon.ico" />
<link rel="icon" type="image/png" href="/images/favicon_16x16.png" sizes="16x16" />
<link rel="icon" type="image/png" href="/images/favicon_32x32.png" sizes="32x32" />
<link rel="icon" type="image/png" href="/images/favicon_48x48.png" sizes="48x48" />
<link rel="icon" type="image/png" href="/images/favicon_192x192.png" sizes="192x192" />


    <link href="//fonts.googleapis.com/css?family=Montserrat:500|Open+Sans:300,400,600" rel="stylesheet">
    
    <link rel="stylesheet" href="/css/main.css">
    
      <link rel="stylesheet" href="/css/docs.css" />
    
  </head>
  <body>
    <nav id="navigation" aria-label="Navigation">
  <div>
    <div class="logo">
      <a href="/"><img src="/images/rook-logo.svg"/></a>
    </div>
    <div
      class="hamburger-controls"
      onclick="if (document.body.classList.contains('menu-open')) { document.body.classList.remove('menu-open') } else { document.body.classList.add('menu-open') }; return false;">
      <span></span> <span></span> <span></span>
    </div>
    <ul class="links">
      <li class="dropdown">
        <a role="button" href="javascript:void(0)">Documentation</a>
        <div class="dropdown-content">
          <a href="/docs/rook/v1.9/">Ceph</a>
          <a href="/docs/cassandra/v1.7/">Cassandra</a>
          <a href="/docs/nfs/v1.7/">NFS</a>
        </div>
      <li class="dropdown">
        <a role="button" href="javascript:void(0)">Community</a>
        <div class="dropdown-content">
          <a href="//github.com/rook/rook">GitHub</a>
          <a href="//slack.rook.io/">Slack</a>
          <a href="//groups.google.com/forum/#!forum/rook-dev">Forum</a>
          <a href="//twitter.com/rook_io">Twitter</a>
        </div>
      </li>
      <li><a href="//blog.rook.io/">Blog</a></li>
      <li><a class="button small" href="/docs/rook/v1.9/quickstart.html">Get Started</a></li>
    </ul>
  </div>
</nav>

    <main id="content" aria-label="Content"><div>



















<section class="docs-header">
  <h1>Ceph</h1>
  <div class="versions">
    <a role="button" href="javascript:void(0)">Rook Ceph v0.6</a>
    <div class="versions-dropdown-content">
      
        <a href="/docs/rook/v1.9/k8s-pre-reqs.html">Rook Ceph v1.9</a>
      
        <a href="/docs/rook/v1.8/k8s-pre-reqs.html">Rook Ceph v1.8</a>
      
        <a href="/docs/rook/v1.7/k8s-pre-reqs.html">Rook Ceph v1.7</a>
      
        <a href="/docs/rook/v1.6/k8s-pre-reqs.html">Rook Ceph v1.6</a>
      
        <a href="/docs/rook/v1.5/k8s-pre-reqs.html">Rook Ceph v1.5</a>
      
        <a href="/docs/rook/v1.4/k8s-pre-reqs.html">Rook Ceph v1.4</a>
      
        <a href="/docs/rook/v1.3/k8s-pre-reqs.html">Rook Ceph v1.3</a>
      
        <a href="/docs/rook/v1.2/k8s-pre-reqs.html">Rook Ceph v1.2</a>
      
        <a href="/docs/rook/v1.1/k8s-pre-reqs.html">Rook Ceph v1.1</a>
      
        <a href="/docs/rook/v1.0/k8s-pre-reqs.html">Rook Ceph v1.0</a>
      
        <a href="/docs/rook/v0.9/k8s-pre-reqs.html">Rook Ceph v0.9</a>
      
        <a href="/docs/rook/v0.8/k8s-pre-reqs.html">Rook Ceph v0.8</a>
      
        <a href="/docs/rook/v0.7/k8s-pre-reqs.html">Rook Ceph v0.7</a>
      
        <a href="/docs/rook/v0.6/k8s-pre-reqs.html" class="active">Rook Ceph v0.6</a>
      
        <a href="/docs/rook/v0.5/k8s-pre-reqs.html">Rook Ceph v0.5</a>
      
        <a href="/docs/rook/latest/k8s-pre-reqs.html">Rook Ceph latest</a>
      
    </div>
    <img src="/images/arrow.svg" />
  </div>
</section>
<div class="page">
  <div class="docs-menu">
      <ul id="docs-ul"></ul>
  </div>
  <div class="docs-content">
    <div class="docs-actions">
      <a id="edit" href="https://github.com/rook/rook/blob/master/Documentation/k8s-pre-reqs.md">Edit on GitHub</a>
    </div>
    
      <div class="alert old">
        <p><b>PLEASE NOTE</b>: This document applies to v0.6 version and not to the latest <strong>stable</strong> release v1.9</p>
      </div>
    
    <div class="docs-text">
      <h1 id="prerequisites">Prerequisites</h1>

<p>Rook can be installed on any existing Kubernetes clusters as long as it meets the minimum version and have the required priviledge to run in the cluster (see below for more information). If you dont have a Kubernetes cluster, you can quickly set one up using <a href="#minikube">Minikube</a>, <a href="#kubeadm">Kubeadm</a> or <a href="#new-local-kubernetes-cluster-with-vagrant">CoreOS/Vagrant</a>.</p>

<h2 id="minimum-version">Minimum Version</h2>

<p>Kubernetes v1.6 or higher is targeted by Rook (while Rook is in alpha it will track the latest release to use the latest features).</p>

<p>Support is available for Kubernetes v1.5.2, although your mileage may vary.
You will need to use the yaml files from the <a href="/cluster/examples/kubernetes/1.5">1.5 folder</a>.</p>

<h2 id="privileges">Privileges</h2>

<p>Creating the Rook operator requires privileges for setting up RBAC. To launch the operator you need to have created your user certificate that is bound to ClusterRole <code class="language-plaintext highlighter-rouge">cluster-admin</code>.</p>

<p>One simple way to achieve it is to assign your certificate with the <code class="language-plaintext highlighter-rouge">system:masters</code> group:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-subj "/CN=admin/O=system:masters"
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">system:masters</code> is a special group that is bound to <code class="language-plaintext highlighter-rouge">cluster-admin</code> ClusterRole, but it canâ€™t be easily revoked so be careful with taking that route in a production setting.
Binding individual certificate to ClusterRole <code class="language-plaintext highlighter-rouge">cluster-admin</code> is revocable by deleting the ClusterRoleBinding.</p>

<h2 id="flexvolume-configuration">Flexvolume Configuration</h2>

<p>Rook uses <a href="https://github.com/kubernetes/community/blob/master/contributors/devel/flexvolume.md">Flexvolume</a> to integrate with Kubernetes for performing storage operations. In some operating systems where Kubernetes is deployed, the <a href="https://github.com/kubernetes/community/blob/master/contributors/devel/flexvolume.md#prerequisites">default Flexvolume plugin directory</a> (the directory where flexvolume drivers are installed) is <strong>read-only</strong>.</p>

<p>This is the case for Kubernetes deployments on CoreOS and Rancher.
In these environments, the Kubelet needs to be told to use a different flexvolume plugin directory that is accessible and writeable.
To do this, you will need to first add the <code class="language-plaintext highlighter-rouge">--volume-plugin-dir</code> flag to the Kubelet and then restart the Kubelet process. 
These steps need to be carried out on <strong>all nodes</strong> in your cluster.</p>

<h3 id="coreos-container-linux">CoreOS Container Linux</h3>

<p>In CoreOS, our recomendation is to specify the flag as shown below:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">--volume-plugin-dir</span><span class="o">=</span>/var/lib/kubelet/volumeplugins
</code></pre></div></div>

<p>Restart Kubelet in order for this change to take effect.</p>

<h3 id="rancher">Rancher</h3>

<p>Rancher provides an easy way to configure Kubelet. This flag can be provided to the Kubelet configuration template at deployment time or by using the <code class="language-plaintext highlighter-rouge">up to date</code> feature if Kubernetes is already deployed.</p>

<p>To configure Flexvolume in Rancher, specify this Kubelet flag as shown below:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">--volume-plugin-dir</span><span class="o">=</span>/var/lib/kubelet/volumeplugins
</code></pre></div></div>

<p>Restart Kubelet in order for this change to take effect.</p>

<h2 id="minikube">Minikube</h2>

<p>To install <code class="language-plaintext highlighter-rouge">minikube</code>, refer to this <a href="https://github.com/kubernetes/minikube/releases">page</a>. Once you have <code class="language-plaintext highlighter-rouge">minikube</code> installed, start a cluster by doing the following:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>minikube start
<span class="go">Starting local Kubernetes cluster...
Starting VM...
SSH-ing files into VM...
Setting up certs...
Starting cluster components...
Connecting to cluster...
Setting up kubeconfig...
Kubectl is now configured to use the cluster.
</span></code></pre></div></div>

<p>After these steps, your minikube cluster is ready to install Rook on.</p>

<h2 id="kubeadm">Kubeadm</h2>

<p>You can easily spin up Rook on top of a <code class="language-plaintext highlighter-rouge">kubeadm</code> cluster.
You can find the instructions on how to install kubeadm in the <a href="https://kubernetes.io/docs/getting-started-guides/kubeadm/"><code class="language-plaintext highlighter-rouge">kubeadm</code> installation page</a>.</p>

<p>By using <code class="language-plaintext highlighter-rouge">kubeadm</code>, you can use Rook in just a few minutes!</p>

<h2 id="new-local-kubernetes-cluster-with-vagrant">New local Kubernetes cluster with Vagrant</h2>

<p>For a quick start with a new local cluster, use the Rook fork of <a href="https://github.com/rook/coreos-kubernetes">coreos-kubernetes</a>. This will bring up a multi-node Kubernetes cluster with <code class="language-plaintext highlighter-rouge">vagrant</code> and CoreOS virtual machines ready to use Rook immediately.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/rook/coreos-kubernetes.git
cd coreos-kubernetes/multi-node/vagrant
vagrant up
export KUBECONFIG="$(pwd)/kubeconfig"
kubectl config use-context vagrant-multi
</code></pre></div></div>

<p>Then wait for the cluster to come up and verify that kubernetes is done initializing (be patient, it takes a bit):</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl cluster-info
</code></pre></div></div>

<p>Once you see a url response, your cluster is <a href="/docs/rook/v0.6/kubernetes.html#deploy-rook">ready for use by Rook</a>.</p>

<h2 id="using-rook-in-kubernetes">Using Rook in Kubernetes</h2>

<p>Now that you have a Kubernetes cluster running, you can start using Rook with <a href="/docs/rook/v0.6/kubernetes.html#deploy-rook">these steps</a>.</p>

    </div>
  </div>
</div>

<script>
  var menu = [];
  var BASE_PATH = "";

  function add(name, url, isChild, current) {
    var item = { name: name, url: url, current: current };
    var container = menu;
    if (isChild && menu.length > 0) {
      menu[menu.length-1].children = menu[menu.length-1].children || [];
      container = menu[menu.length-1].children;
      if (current) {
        menu[menu.length-1].childCurrent = true;
      }
    }
    container.push(item);
  }

  
    add(
      "Rook",
      "/docs/rook/v0.6/",
      false,
      false
    );
  
    add(
      "Kubernetes",
      "/docs/rook/v0.6/kubernetes.html",
      false,
      false
    );
  
    add(
      "Prerequisites",
      "/docs/rook/v0.6/k8s-pre-reqs.html",
      true,
      true
    );
  
    add(
      "Block Storage",
      "/docs/rook/v0.6/k8s-block.html",
      true,
      false
    );
  
    add(
      "Object Storage",
      "/docs/rook/v0.6/k8s-object.html",
      true,
      false
    );
  
    add(
      "Shared File System",
      "/docs/rook/v0.6/k8s-filesystem.html",
      true,
      false
    );
  
    add(
      "Monitoring",
      "/docs/rook/v0.6/k8s-monitoring.html",
      true,
      false
    );
  
    add(
      "Pool CRD",
      "/docs/rook/v0.6/pool-crd.html",
      true,
      false
    );
  
    add(
      "Cluster CRD",
      "/docs/rook/v0.6/cluster-crd.html",
      true,
      false
    );
  
    add(
      "Object Store CRD",
      "/docs/rook/v0.6/object-store-crd.html",
      true,
      false
    );
  
    add(
      "File System CRD",
      "/docs/rook/v0.6/filesystem-crd.html",
      true,
      false
    );
  
    add(
      "Helm Chart",
      "/docs/rook/v0.6/helm-operator.html",
      true,
      false
    );
  
    add(
      "Upgrading Rook",
      "/docs/rook/v0.6/upgrade.html",
      true,
      false
    );
  
    add(
      "Rook Client",
      "/docs/rook/v0.6/client.html",
      false,
      false
    );
  
    add(
      "Contributing",
      "/docs/rook/v0.6/development-flow.html",
      false,
      false
    );
  
    add(
      "Toolbox",
      "/docs/rook/v0.6/toolbox.html",
      false,
      false
    );
  
    add(
      "Advanced Configuration",
      "/docs/rook/v0.6/advanced-configuration.html",
      true,
      false
    );
  
    add(
      "Common Problems",
      "/docs/rook/v0.6/common-problems.html",
      false,
      false
    );
  

  function getEntry(item) {
    var itemDom = document.createElement('li');

    if (item.current) {
      itemDom.innerHTML = item.name;
      itemDom.classList.add('current');
    } else {
      itemDom.innerHTML = '<a href="' + item.url + '">' + item.name + '</a>';
    }

    return itemDom;
  }

  // Flush css changes as explained in: https://stackoverflow.com/a/34726346
  // and more completely: https://stackoverflow.com/a/6956049
  function flushCss(element) {
    element.offsetHeight;
  }

  function addArrow(itemDom) {
    var MAIN_ITEM_HEIGHT = 24;
    var BOTTOM_PADDING = 20;
    var arrowDom = document.createElement('a');
    arrowDom.classList.add('arrow');
    arrowDom.innerHTML = '<img src="' + BASE_PATH + '/images/arrow.svg" />';
    arrowDom.onclick = function(itemDom) {
      return function () {
        // Calculated full height of the opened list
        var fullHeight = MAIN_ITEM_HEIGHT + BOTTOM_PADDING + itemDom.lastChild.clientHeight + 'px';

        itemDom.classList.toggle('open');

        if (itemDom.classList.contains('open')) {
          itemDom.style.height = fullHeight;
        } else {
          // If the list height is auto we have to set it to fullHeight
          // without tranistion before we shrink it to collapsed height
          if (itemDom.style.height === 'auto') {
            itemDom.style.transition = 'none';
            itemDom.style.height = fullHeight;
            flushCss(itemDom);
            itemDom.style.transition = '';
          }
          itemDom.style.height = MAIN_ITEM_HEIGHT + 'px';
        }

        return false;
      };
    }(itemDom);
    itemDom.appendChild(arrowDom);

    if ((item.current && item.children) || item.childCurrent) {
      itemDom.classList.add('open');
      itemDom.style.height = 'auto';
    } else {
      itemDom.style.height = MAIN_ITEM_HEIGHT + 'px';
    }
  }

  var menuDom = document.getElementById('docs-ul');
  for (var i = 0; i < menu.length; i++) {
    var item = menu[i];
    var itemDom = getEntry(item);

    if (item.childCurrent) {
      itemDom.classList.add('childCurrent');
    }

    if (item.children) {
      addArrow(itemDom);
      itemDom.classList.add('children');
      var children = document.createElement('ul');
      for (var j = 0; j < item.children.length; j++) {
        children.appendChild(getEntry(item.children[j]));
      }
      itemDom.appendChild(children);
    }
    menuDom.appendChild(itemDom);
  }
</script>
</div></main>
    <footer id="footer" aria-label="Footer">
  <div class="top">
    <a href="//www.cncf.io">
      <img
        class="cncf"
        src="/images/cncf.png"
        srcset="/images/cncf@2x.png 2x, /images/cncf@3x.png 3x" />
    </a>
    <p>We are a Cloud Native Computing Foundation graduated project.</p>
  </div>
  <div class="middle">
    <div class="grid-center">
      <div class="col_sm-12">
        <span>Getting Started</span>
        <a href="//github.com/rook/rook">GitHub</a>
        <a href="/docs/rook/v1.9/">Documentation</a>
        <a href="//github.com/rook/rook/blob/master/CONTRIBUTING.md#how-to-contribute">How to Contribute</a>
      </div>
      <div class="col_sm-12">
        <span>Community</span>
        <a href="//slack.rook.io/">Slack</a>
        <a href="//twitter.com/rook_io">Twitter</a>
        <a href="//groups.google.com/forum/#!forum/rook-dev">Forum</a>
        <a href="//blog.rook.io/">Blog</a>
      </div>
      <div class="col_sm-12">
        <span>Contact</span>
        <a href="mailto:cncf-rook-info@lists.cncf.io">Email</a>
        <a href="//github.com/rook/rook/issues">Feature request</a>
      </div>
      <div class="col_sm-12">
        <span>Top Contributors</span>
        <a href="//cloudical.io/">Cloudical</a>
        <a href="//cybozu.com">Cybozu, Inc</a>
        <a href="//www.redhat.com">Red Hat</a>
        <a href="//www.suse.com/">SUSE</a>
        <a href="//upbound.io">Upbound</a>
      </div>
    </div>
  </div>
  <div class="bottom">
    <div class="grid-center">
      <div class="col-8">
        <a class="logo" href="/">
          <img src="/images/rook-logo-small.svg" alt="rook.io" />
        </a>
        <p>
          &#169; Rook Authors 2022. Documentation distributed under
          <a href="https://creativecommons.org/licenses/by/4.0">CC-BY-4.0</a>.
        </p>
        <p>
          &#169; 2022 The Linux Foundation. All rights reserved. The Linux Foundation has
          registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our
          <a href="https://www.linuxfoundation.org/trademark-usage/">Trademark Usage</a> page.
        </p>
      </div>
    </div>
  </div>
</footer>


  <script src="/js/anchor.js"></script>
  <script>
    anchors.options = {
      placement: 'right',
      icon: '#',
    }

    document.addEventListener('DOMContentLoaded', function(event) {
      anchors.add('.docs-text h1, .docs-text h2, .docs-text h3, .docs-text h4, .docs-text h5, .docs-text h6');
    });
  </script>




    
  </body>
</html>
