












































<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />

    
    <meta name="robots" content="noindex">
    

    <title>Ceph Docs</title>

    <link rel="canonical" href="https://rook.io/docs/rook/latest/ceph-csi-snapshot.html">

    <link rel="icon" href="/favicon.ico" />
<link rel="icon" type="image/png" href="/images/favicon_16x16.png" sizes="16x16" />
<link rel="icon" type="image/png" href="/images/favicon_32x32.png" sizes="32x32" />
<link rel="icon" type="image/png" href="/images/favicon_48x48.png" sizes="48x48" />
<link rel="icon" type="image/png" href="/images/favicon_192x192.png" sizes="192x192" />


    <link href="//fonts.googleapis.com/css?family=Montserrat:500|Open+Sans:300,400,600" rel="stylesheet">
    
    <link rel="stylesheet" href="/css/main.css">
    
      <link rel="stylesheet" href="/css/docs.css" />
    
  </head>
  <body>
    <nav id="navigation" aria-label="Navigation">
  <div>
    <div class="logo">
      <a href="/"><img src="/images/rook-logo.svg"/></a>
    </div>
    <div
      class="hamburger-controls"
      onclick="if (document.body.classList.contains('menu-open')) { document.body.classList.remove('menu-open') } else { document.body.classList.add('menu-open') }; return false;">
      <span></span> <span></span> <span></span>
    </div>
    <ul class="links">
      <li class="dropdown">
        <a role="button" href="javascript:void(0)">Documentation</a>
        <div class="dropdown-content">
          <a href="/docs/rook/v1.9/">Ceph</a>
          <a href="/docs/cassandra/v1.7/">Cassandra</a>
          <a href="/docs/nfs/v1.7/">NFS</a>
        </div>
      <li class="dropdown">
        <a role="button" href="javascript:void(0)">Community</a>
        <div class="dropdown-content">
          <a href="//github.com/rook/rook">GitHub</a>
          <a href="//slack.rook.io/">Slack</a>
          <a href="//groups.google.com/forum/#!forum/rook-dev">Forum</a>
          <a href="//twitter.com/rook_io">Twitter</a>
        </div>
      </li>
      <li><a href="//blog.rook.io/">Blog</a></li>
      <li><a class="button small" href="/docs/rook/v1.9/quickstart.html">Get Started</a></li>
    </ul>
  </div>
</nav>

    <main id="content" aria-label="Content"><div>



















<section class="docs-header">
  <h1>Ceph</h1>
  <div class="versions">
    <a role="button" href="javascript:void(0)">Rook Ceph latest</a>
    <div class="versions-dropdown-content">
      
        <a href="/docs/rook/v1.9/ceph-csi-snapshot.html">Rook Ceph v1.9</a>
      
        <a href="/docs/rook/v1.8/ceph-csi-snapshot.html">Rook Ceph v1.8</a>
      
        <a href="/docs/rook/v1.7/ceph-csi-snapshot.html">Rook Ceph v1.7</a>
      
        <a href="/docs/rook/v1.6/ceph-csi-snapshot.html">Rook Ceph v1.6</a>
      
        <a href="/docs/rook/v1.5/ceph-csi-snapshot.html">Rook Ceph v1.5</a>
      
        <a href="/docs/rook/v1.4/ceph-csi-snapshot.html">Rook Ceph v1.4</a>
      
        <a href="/docs/rook/v1.3/ceph-csi-snapshot.html">Rook Ceph v1.3</a>
      
        <a href="/docs/rook/v1.2/ceph-csi-snapshot.html">Rook Ceph v1.2</a>
      
        <a href="/docs/rook/v1.1/ceph-csi-snapshot.html">Rook Ceph v1.1</a>
      
        <a href="/docs/rook/v1.0/ceph-csi-snapshot.html">Rook Ceph v1.0</a>
      
        <a href="/docs/rook/v0.9/ceph-csi-snapshot.html">Rook Ceph v0.9</a>
      
        <a href="/docs/rook/v0.8/ceph-csi-snapshot.html">Rook Ceph v0.8</a>
      
        <a href="/docs/rook/v0.7/ceph-csi-snapshot.html">Rook Ceph v0.7</a>
      
        <a href="/docs/rook/v0.6/ceph-csi-snapshot.html">Rook Ceph v0.6</a>
      
        <a href="/docs/rook/v0.5/ceph-csi-snapshot.html">Rook Ceph v0.5</a>
      
        <a href="/docs/rook/latest/ceph-csi-snapshot.html" class="active">Rook Ceph latest</a>
      
    </div>
    <img src="/images/arrow.svg" />
  </div>
</section>
<div class="page">
  <div class="docs-menu">
      <ul id="docs-ul"></ul>
  </div>
  <div class="docs-content">
    <div class="docs-actions">
      <a id="edit" href="https://github.com/rook/rook/blob/master/Documentation/ceph-csi-snapshot.md">Edit on GitHub</a>
    </div>
    
      <div class="alert master">
        <p><b>PLEASE NOTE:</b> This document applies to an <b>unreleased</b> version of Rook. It is strongly recommended that you only use official releases of Rook, as unreleased versions are subject to changes and incompatibilities that will not be supported in the official releases.</p>
      </div>
    
    <div class="docs-text">
      
<h2 id="prerequisites">Prerequisites</h2>

<ul>
  <li>
    <p>Rook officially supports v1/v1beta1 snapshots for kubernetes v1.17+.</p>
  </li>
  <li>
    <p>Install the snapshot controller and snapshot v1/v1beta1 CRD as required. More info can be found <a href="https://github.com/kubernetes-csi/external-snapshotter/tree/v4.0.0#usage">here</a>.</p>
  </li>
</ul>

<p>Note: If only Alpha snapshots are available, enable snapshotter in <code class="language-plaintext highlighter-rouge">rook-ceph-operator-config</code> or helm chart <code class="language-plaintext highlighter-rouge">values.yaml</code>, change the external-snapshotter image to <code class="language-plaintext highlighter-rouge">k8s.gcr.io/sig-storage/csi-snapshotter:v1.2.2</code> and refer to the <a href="https://github.com/rook/rook/blob/release-1.3/Documentation/ceph-csi-drivers.md#rbd-snapshots">alpha snapshots documentation</a></p>

<ul>
  <li>We also need a <code class="language-plaintext highlighter-rouge">VolumeSnapshotClass</code> for volume snapshot to work. The purpose of a <code class="language-plaintext highlighter-rouge">VolumeSnapshotClass</code> is
defined in <a href="https://kubernetes.io/docs/concepts/storage/volume-snapshot-classes/">the kubernetes
documentation</a>.
In short, as the documentation describes it:</li>
</ul>

<blockquote>
  <p>Just like StorageClass provides a way for administrators to describe the
“classes” of storage they offer when provisioning a volume,
VolumeSnapshotClass provides a way to describe the “classes” of storage when
provisioning a volume snapshot.</p>
</blockquote>

<h2 id="upgrade-snapshot-api">Upgrade Snapshot API</h2>

<p>If your Kubernetes version is updated to a newer version of the snapshot API, follow the upgrade guide <a href="https://github.com/kubernetes-csi/external-snapshotter/tree/v4.0.0#upgrade">here</a> to upgrade from v1alpha1 to v1beta1, or v1beta1 to v1.</p>

<h2 id="rbd-snapshots">RBD Snapshots</h2>

<h3 id="volumesnapshotclass">VolumeSnapshotClass</h3>

<p>In <a href="https://github.com/rook/rook/tree/master/deploy/examples/csi/rbd/snapshotclass.yaml">VolumeSnapshotClass</a>,
the <code class="language-plaintext highlighter-rouge">csi.storage.k8s.io/snapshotter-secret-name</code> parameter should reference the
name of the secret created for the rbdplugin and <code class="language-plaintext highlighter-rouge">pool</code> to reflect the Ceph pool name.</p>

<p>Update the value of the <code class="language-plaintext highlighter-rouge">clusterID</code> field to match the namespace that Rook is
running in. When Ceph CSI is deployed by Rook, the operator will automatically
maintain a configmap whose contents will match this key. By default this is
“rook-ceph”.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">kubectl create -f deploy/examples/csi/rbd/snapshotclass.yaml
</span></code></pre></div></div>

<h3 id="volumesnapshot">Volumesnapshot</h3>

<p>In <a href="https://github.com/rook/rook/tree/master/deploy/examples/csi/rbd/snapshot.yaml">snapshot</a>,
<code class="language-plaintext highlighter-rouge">volumeSnapshotClassName</code> should be the name of the <code class="language-plaintext highlighter-rouge">VolumeSnapshotClass</code>
previously created. The <code class="language-plaintext highlighter-rouge">persistentVolumeClaimName</code> should be the name of the
PVC which is already created by the RBD CSI driver.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">kubectl create -f deploy/examples/csi/rbd/snapshot.yaml
</span></code></pre></div></div>

<h3 id="verify-rbd-snapshot-creation">Verify RBD Snapshot Creation</h3>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">kubectl get volumesnapshotclass
</span></code></pre></div></div>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>NAME                      DRIVER                       DELETIONPOLICY   AGE
csi-rbdplugin-snapclass   rook-ceph.rbd.csi.ceph.com   Delete           3h55m
</code></pre></div>  </div>
</blockquote>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">kubectl get volumesnapshot
</span></code></pre></div></div>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>NAME               READYTOUSE   SOURCEPVC   SOURCESNAPSHOTCONTENT   RESTORESIZE   SNAPSHOTCLASS             SNAPSHOTCONTENT                                    CREATIONTIME   AGE
rbd-pvc-snapshot   true         rbd-pvc                             1Gi           csi-rbdplugin-snapclass   snapcontent-79090db0-7c66-4b18-bf4a-634772c7cac7   3h50m          3h51m
</code></pre></div>  </div>
</blockquote>

<p>The snapshot will be ready to restore to a new PVC when the <code class="language-plaintext highlighter-rouge">READYTOUSE</code> field of the
<code class="language-plaintext highlighter-rouge">volumesnapshot</code> is set to true.</p>

<h3 id="restore-the-snapshot-to-a-new-pvc">Restore the snapshot to a new PVC</h3>

<p>In
<a href="https://github.com/rook/rook/tree/master/deploy/examples/csi/rbd/pvc-restore.yaml">pvc-restore</a>,
<code class="language-plaintext highlighter-rouge">dataSource</code> should be the name of the <code class="language-plaintext highlighter-rouge">VolumeSnapshot</code> previously
created. The <code class="language-plaintext highlighter-rouge">dataSource</code> kind should be the <code class="language-plaintext highlighter-rouge">VolumeSnapshot</code>.</p>

<p>Create a new PVC from the snapshot</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">kubectl create -f deploy/examples/csi/rbd/pvc-restore.yaml
</span></code></pre></div></div>

<h3 id="verify-rbd-clone-pvc-creation">Verify RBD Clone PVC Creation</h3>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">kubectl get pvc
</span></code></pre></div></div>
<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>NAME              STATUS   VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS          AGE
rbd-pvc           Bound    pvc-84294e34-577a-11e9-b34f-525400581048   1Gi        RWO            rook-ceph-block       34m
rbd-pvc-restore   Bound    pvc-575537bf-577f-11e9-b34f-525400581048   1Gi        RWO            rook-ceph-block       8s
</code></pre></div>  </div>
</blockquote>

<h2 id="rbd-snapshot-resource-cleanup">RBD snapshot resource Cleanup</h2>

<p>To clean your cluster of the resources created by this example, run the following:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">kubectl delete -f deploy/examples/csi/rbd/pvc-restore.yaml
kubectl delete -f deploy/examples/csi/rbd/snapshot.yaml
kubectl delete -f deploy/examples/csi/rbd/snapshotclass.yaml
</span></code></pre></div></div>

<h2 id="cephfs-snapshots">CephFS Snapshots</h2>

<h3 id="volumesnapshotclass-1">VolumeSnapshotClass</h3>

<p>In <a href="https://github.com/rook/rook/tree/master/deploy/examples/csi/cephfs/snapshotclass.yaml">VolumeSnapshotClass</a>,
the <code class="language-plaintext highlighter-rouge">csi.storage.k8s.io/snapshotter-secret-name</code> parameter should reference the
name of the secret created for the cephfsplugin.</p>

<p>In the volumesnapshotclass, update the value of the <code class="language-plaintext highlighter-rouge">clusterID</code> field to match the namespace that Rook is
running in. When Ceph CSI is deployed by Rook, the operator will automatically
maintain a configmap whose contents will match this key. By default this is
“rook-ceph”.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">kubectl create -f deploy/examples/csi/cephfs/snapshotclass.yaml
</span></code></pre></div></div>

<h3 id="volumesnapshot-1">Volumesnapshot</h3>

<p>In <a href="https://github.com/rook/rook/tree/master/deploy/examples/csi/cephfs/snapshot.yaml">snapshot</a>,
<code class="language-plaintext highlighter-rouge">volumeSnapshotClassName</code> should be the name of the <code class="language-plaintext highlighter-rouge">VolumeSnapshotClass</code>
previously created. The <code class="language-plaintext highlighter-rouge">persistentVolumeClaimName</code> should be the name of the
PVC which is already created by the CephFS CSI driver.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">kubectl create -f deploy/examples/csi/cephfs/snapshot.yaml
</span></code></pre></div></div>

<h3 id="verify-cephfs-snapshot-creation">Verify CephFS Snapshot Creation</h3>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">kubectl get volumesnapshotclass
</span></code></pre></div></div>
<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>NAME                        DRIVER                          DELETIONPOLICY   AGE
csi-cephfslugin-snapclass   rook-ceph.cephfs.csi.ceph.com   Delete           3h55m
</code></pre></div>  </div>
  <div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">kubectl get volumesnapshot
</span></code></pre></div>  </div>
</blockquote>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>NAME                  READYTOUSE   SOURCEPVC   SOURCESNAPSHOTCONTENT  RESTORESIZE   SNAPSHOTCLASS                SNAPSHOTCONTENT                                   CREATIONTIME   AGE
cephfs-pvc-snapshot   true         cephfs-pvc                         1Gi           csi-cephfsplugin-snapclass   snapcontent-34476204-a14a-4d59-bfbc-2bbba695652c  3h50m          3h51m
</code></pre></div>  </div>
</blockquote>

<p>The snapshot will be ready to restore to a new PVC when <code class="language-plaintext highlighter-rouge">READYTOUSE</code> field of the
<code class="language-plaintext highlighter-rouge">volumesnapshot</code> is set to true.</p>

<h3 id="restore-the-snapshot-to-a-new-pvc-1">Restore the snapshot to a new PVC</h3>

<p>In
<a href="https://github.com/rook/rook/tree/master/deploy/examples/csi/cephfs/pvc-restore.yaml">pvc-restore</a>,
<code class="language-plaintext highlighter-rouge">dataSource</code> should be the name of the <code class="language-plaintext highlighter-rouge">VolumeSnapshot</code> previously
created. The <code class="language-plaintext highlighter-rouge">dataSource</code> kind should be the <code class="language-plaintext highlighter-rouge">VolumeSnapshot</code>.</p>

<p>Create a new PVC from the snapshot</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">kubectl create -f deploy/examples/csi/cephfs/pvc-restore.yaml
</span></code></pre></div></div>

<h3 id="verify-cephfs-restore-pvc-creation">Verify CephFS Restore PVC Creation</h3>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">kubectl get pvc
</span></code></pre></div></div>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>NAME                 STATUS   VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS      AGE
cephfs-pvc           Bound    pvc-74734901-577a-11e9-b34f-525400581048   1Gi        RWX            rook-cephfs       55m
cephfs-pvc-restore   Bound    pvc-95308c75-6c93-4928-a551-6b5137192209   1Gi        RWX            rook-cephfs       34s
</code></pre></div>  </div>
</blockquote>

<h2 id="cephfs-snapshot-resource-cleanup">CephFS snapshot resource Cleanup</h2>

<p>To clean your cluster of the resources created by this example, run the following:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">kubectl delete -f deploy/examples/csi/cephfs/pvc-restore.yaml
kubectl delete -f deploy/examples/csi/cephfs/snapshot.yaml
kubectl delete -f deploy/examples/csi/cephfs/snapshotclass.yaml
</span></code></pre></div></div>

<h2 id="limitations">Limitations</h2>

<ul>
  <li>There is a limit of 400 snapshots per cephFS filesystem.</li>
  <li>The PVC cannot be deleted if it has snapshots. make sure all the snapshots on the PVC are deleted before you delete the PVC.</li>
</ul>

    </div>
  </div>
</div>

<script>
  var menu = [];
  var BASE_PATH = "";

  function add(name, url, isChild, current) {
    var item = { name: name, url: url, current: current };
    var container = menu;
    if (isChild && menu.length > 0) {
      menu[menu.length-1].children = menu[menu.length-1].children || [];
      container = menu[menu.length-1].children;
      if (current) {
        menu[menu.length-1].childCurrent = true;
      }
    }
    container.push(item);
  }

  
    add(
      "Rook",
      "/docs/rook/latest/",
      false,
      false
    );
  
    add(
      "Quickstart",
      "/docs/rook/latest/quickstart.html",
      false,
      false
    );
  
    add(
      "Prerequisites",
      "/docs/rook/latest/pre-reqs.html",
      false,
      false
    );
  
    add(
      "Authenticated Registries",
      "/docs/rook/latest/authenticated-registry.html",
      true,
      false
    );
  
    add(
      "Pod Security Policies",
      "/docs/rook/latest/pod-security-policies.html",
      true,
      false
    );
  
    add(
      "Ceph Storage",
      "/docs/rook/latest/ceph-storage.html",
      false,
      false
    );
  
    add(
      "Examples",
      "/docs/rook/latest/ceph-examples.html",
      true,
      false
    );
  
    add(
      "OpenShift",
      "/docs/rook/latest/ceph-openshift.html",
      true,
      false
    );
  
    add(
      "Block Storage",
      "/docs/rook/latest/ceph-block.html",
      true,
      false
    );
  
    add(
      "Object Storage",
      "/docs/rook/latest/ceph-object.html",
      true,
      false
    );
  
    add(
      "Object Multisite",
      "/docs/rook/latest/ceph-object-multisite.html",
      true,
      false
    );
  
    add(
      "Shared Filesystem",
      "/docs/rook/latest/ceph-filesystem.html",
      true,
      false
    );
  
    add(
      "Ceph Dashboard",
      "/docs/rook/latest/ceph-dashboard.html",
      true,
      false
    );
  
    add(
      "Prometheus Monitoring",
      "/docs/rook/latest/ceph-monitoring.html",
      true,
      false
    );
  
    add(
      "Cluster CRD",
      "/docs/rook/latest/ceph-cluster-crd.html",
      true,
      false
    );
  
    add(
      "Block Pool CRD",
      "/docs/rook/latest/ceph-pool-crd.html",
      true,
      false
    );
  
    add(
      "Object Store CRD",
      "/docs/rook/latest/ceph-object-store-crd.html",
      true,
      false
    );
  
    add(
      "Object Multisite CRDs",
      "/docs/rook/latest/ceph-object-multisite-crd.html",
      true,
      false
    );
  
    add(
      "Object Bucket Claim",
      "/docs/rook/latest/ceph-object-bucket-claim.html",
      true,
      false
    );
  
    add(
      "Object Store User CRD",
      "/docs/rook/latest/ceph-object-store-user-crd.html",
      true,
      false
    );
  
    add(
      "Bucket Notifications",
      "/docs/rook/latest/ceph-object-bucket-notifications.html",
      true,
      false
    );
  
    add(
      "Shared Filesystem CRD",
      "/docs/rook/latest/ceph-filesystem-crd.html",
      true,
      false
    );
  
    add(
      "NFS CRD",
      "/docs/rook/latest/ceph-nfs-crd.html",
      true,
      false
    );
  
    add(
      "Ceph CSI",
      "/docs/rook/latest/ceph-csi-drivers.html",
      true,
      false
    );
  
    add(
      "RBD Mirroring",
      "/docs/rook/latest/rbd-mirroring.html",
      true,
      false
    );
  
    add(
      "Failover and Failback",
      "/docs/rook/latest/async-disaster-recovery.html",
      true,
      false
    );
  
    add(
      "Snapshots",
      "/docs/rook/latest/ceph-csi-snapshot.html",
      true,
      true
    );
  
    add(
      "Volume clone",
      "/docs/rook/latest/ceph-csi-volume-clone.html",
      true,
      false
    );
  
    add(
      "Client CRD",
      "/docs/rook/latest/ceph-client-crd.html",
      true,
      false
    );
  
    add(
      "RBD Mirror CRD",
      "/docs/rook/latest/ceph-rbd-mirror-crd.html",
      true,
      false
    );
  
    add(
      "Filesystem Mirror CRD",
      "/docs/rook/latest/ceph-fs-mirror-crd.html",
      true,
      false
    );
  
    add(
      "SubVolume Group CRD",
      "/docs/rook/latest/ceph-fs-subvolumegroup.html",
      true,
      false
    );
  
    add(
      "RADOS Namespace CRD",
      "/docs/rook/latest/ceph-pool-radosnamespace.html",
      true,
      false
    );
  
    add(
      "Key Management System",
      "/docs/rook/latest/ceph-kms.html",
      true,
      false
    );
  
    add(
      "Configuration",
      "/docs/rook/latest/ceph-configuration.html",
      true,
      false
    );
  
    add(
      "Upgrades",
      "/docs/rook/latest/ceph-upgrade.html",
      true,
      false
    );
  
    add(
      "Cleanup",
      "/docs/rook/latest/ceph-teardown.html",
      true,
      false
    );
  
    add(
      "Helm Charts",
      "/docs/rook/latest/helm.html",
      false,
      false
    );
  
    add(
      "Ceph Operator",
      "/docs/rook/latest/helm-operator.html",
      true,
      false
    );
  
    add(
      "Ceph Cluster",
      "/docs/rook/latest/helm-ceph-cluster.html",
      true,
      false
    );
  
    add(
      "Common Issues",
      "/docs/rook/latest/common-issues.html",
      false,
      false
    );
  
    add(
      "Ceph Tools",
      "/docs/rook/latest/ceph-tools.html",
      false,
      false
    );
  
    add(
      "Toolbox",
      "/docs/rook/latest/ceph-toolbox.html",
      true,
      false
    );
  
    add(
      "Common Issues",
      "/docs/rook/latest/ceph-common-issues.html",
      true,
      false
    );
  
    add(
      "CSI Common Issues",
      "/docs/rook/latest/ceph-csi-troubleshooting.html",
      true,
      false
    );
  
    add(
      "Monitor Health",
      "/docs/rook/latest/ceph-mon-health.html",
      true,
      false
    );
  
    add(
      "OSD Management",
      "/docs/rook/latest/ceph-osd-mgmt.html",
      true,
      false
    );
  
    add(
      "Direct Tools",
      "/docs/rook/latest/direct-tools.html",
      true,
      false
    );
  
    add(
      "Advanced Configuration",
      "/docs/rook/latest/ceph-advanced-configuration.html",
      true,
      false
    );
  
    add(
      "OpenShift Common Issues",
      "/docs/rook/latest/ceph-openshift-issues.html",
      true,
      false
    );
  
    add(
      "Disaster Recovery",
      "/docs/rook/latest/ceph-disaster-recovery.html",
      true,
      false
    );
  
    add(
      "Contributing",
      "/docs/rook/latest/development-flow.html",
      false,
      false
    );
  
    add(
      "Developer Environment",
      "/docs/rook/latest/development-environment.html",
      true,
      false
    );
  
    add(
      "Storage Providers",
      "/docs/rook/latest/storage-providers.html",
      true,
      false
    );
  

  function getEntry(item) {
    var itemDom = document.createElement('li');

    if (item.current) {
      itemDom.innerHTML = item.name;
      itemDom.classList.add('current');
    } else {
      itemDom.innerHTML = '<a href="' + item.url + '">' + item.name + '</a>';
    }

    return itemDom;
  }

  // Flush css changes as explained in: https://stackoverflow.com/a/34726346
  // and more completely: https://stackoverflow.com/a/6956049
  function flushCss(element) {
    element.offsetHeight;
  }

  function addArrow(itemDom) {
    var MAIN_ITEM_HEIGHT = 24;
    var BOTTOM_PADDING = 20;
    var arrowDom = document.createElement('a');
    arrowDom.classList.add('arrow');
    arrowDom.innerHTML = '<img src="' + BASE_PATH + '/images/arrow.svg" />';
    arrowDom.onclick = function(itemDom) {
      return function () {
        // Calculated full height of the opened list
        var fullHeight = MAIN_ITEM_HEIGHT + BOTTOM_PADDING + itemDom.lastChild.clientHeight + 'px';

        itemDom.classList.toggle('open');

        if (itemDom.classList.contains('open')) {
          itemDom.style.height = fullHeight;
        } else {
          // If the list height is auto we have to set it to fullHeight
          // without tranistion before we shrink it to collapsed height
          if (itemDom.style.height === 'auto') {
            itemDom.style.transition = 'none';
            itemDom.style.height = fullHeight;
            flushCss(itemDom);
            itemDom.style.transition = '';
          }
          itemDom.style.height = MAIN_ITEM_HEIGHT + 'px';
        }

        return false;
      };
    }(itemDom);
    itemDom.appendChild(arrowDom);

    if ((item.current && item.children) || item.childCurrent) {
      itemDom.classList.add('open');
      itemDom.style.height = 'auto';
    } else {
      itemDom.style.height = MAIN_ITEM_HEIGHT + 'px';
    }
  }

  var menuDom = document.getElementById('docs-ul');
  for (var i = 0; i < menu.length; i++) {
    var item = menu[i];
    var itemDom = getEntry(item);

    if (item.childCurrent) {
      itemDom.classList.add('childCurrent');
    }

    if (item.children) {
      addArrow(itemDom);
      itemDom.classList.add('children');
      var children = document.createElement('ul');
      for (var j = 0; j < item.children.length; j++) {
        children.appendChild(getEntry(item.children[j]));
      }
      itemDom.appendChild(children);
    }
    menuDom.appendChild(itemDom);
  }
</script>
</div></main>
    <footer id="footer" aria-label="Footer">
  <div class="top">
    <a href="//www.cncf.io">
      <img
        class="cncf"
        src="/images/cncf.png"
        srcset="/images/cncf@2x.png 2x, /images/cncf@3x.png 3x" />
    </a>
    <p>We are a Cloud Native Computing Foundation graduated project.</p>
  </div>
  <div class="middle">
    <div class="grid-center">
      <div class="col_sm-12">
        <span>Getting Started</span>
        <a href="//github.com/rook/rook">GitHub</a>
        <a href="/docs/rook/v1.9/">Documentation</a>
        <a href="//github.com/rook/rook/blob/master/CONTRIBUTING.md#how-to-contribute">How to Contribute</a>
      </div>
      <div class="col_sm-12">
        <span>Community</span>
        <a href="//slack.rook.io/">Slack</a>
        <a href="//twitter.com/rook_io">Twitter</a>
        <a href="//groups.google.com/forum/#!forum/rook-dev">Forum</a>
        <a href="//blog.rook.io/">Blog</a>
      </div>
      <div class="col_sm-12">
        <span>Contact</span>
        <a href="mailto:cncf-rook-info@lists.cncf.io">Email</a>
        <a href="//github.com/rook/rook/issues">Feature request</a>
      </div>
      <div class="col_sm-12">
        <span>Top Contributors</span>
        <a href="//cloudical.io/">Cloudical</a>
        <a href="//cybozu.com">Cybozu, Inc</a>
        <a href="//www.redhat.com">Red Hat</a>
        <a href="//www.suse.com/">SUSE</a>
        <a href="//upbound.io">Upbound</a>
      </div>
    </div>
  </div>
  <div class="bottom">
    <div class="grid-center">
      <div class="col-8">
        <a class="logo" href="/">
          <img src="/images/rook-logo-small.svg" alt="rook.io" />
        </a>
        <p>
          &#169; Rook Authors 2022. Documentation distributed under
          <a href="https://creativecommons.org/licenses/by/4.0">CC-BY-4.0</a>.
        </p>
        <p>
          &#169; 2022 The Linux Foundation. All rights reserved. The Linux Foundation has
          registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our
          <a href="https://www.linuxfoundation.org/trademark-usage/">Trademark Usage</a> page.
        </p>
      </div>
    </div>
  </div>
</footer>


  <script src="/js/anchor.js"></script>
  <script>
    anchors.options = {
      placement: 'right',
      icon: '#',
    }

    document.addEventListener('DOMContentLoaded', function(event) {
      anchors.add('.docs-text h1, .docs-text h2, .docs-text h3, .docs-text h4, .docs-text h5, .docs-text h6');
    });
  </script>




    
  </body>
</html>
