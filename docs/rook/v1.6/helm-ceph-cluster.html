












































<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />

    
    <meta name="robots" content="noindex">
    

    <title>Ceph Docs</title>

    <link rel="canonical" href="https://rook.io/docs/rook/v1.6/helm-ceph-cluster.html">

    <link rel="icon" href="/favicon.ico" />
<link rel="icon" type="image/png" href="/images/favicon_16x16.png" sizes="16x16" />
<link rel="icon" type="image/png" href="/images/favicon_32x32.png" sizes="32x32" />
<link rel="icon" type="image/png" href="/images/favicon_48x48.png" sizes="48x48" />
<link rel="icon" type="image/png" href="/images/favicon_192x192.png" sizes="192x192" />


    <link href="//fonts.googleapis.com/css?family=Montserrat:500|Open+Sans:300,400,600" rel="stylesheet">
    
    <link rel="stylesheet" href="/css/main.css">
    
      <link rel="stylesheet" href="/css/docs.css" />
    
  </head>
  <body>
    <nav id="navigation" aria-label="Navigation">
  <div>
    <div class="logo">
      <a href="/"><img src="/images/rook-logo.svg"/></a>
    </div>
    <div
      class="hamburger-controls"
      onclick="if (document.body.classList.contains('menu-open')) { document.body.classList.remove('menu-open') } else { document.body.classList.add('menu-open') }; return false;">
      <span></span> <span></span> <span></span>
    </div>
    <ul class="links">
      <li class="dropdown">
        <a role="button" href="javascript:void(0)">Documentation</a>
        <div class="dropdown-content">
          <a href="/docs/rook/v1.9/">Ceph</a>
          <a href="/docs/cassandra/v1.7/">Cassandra</a>
          <a href="/docs/nfs/v1.7/">NFS</a>
        </div>
      <li class="dropdown">
        <a role="button" href="javascript:void(0)">Community</a>
        <div class="dropdown-content">
          <a href="//github.com/rook/rook">GitHub</a>
          <a href="//slack.rook.io/">Slack</a>
          <a href="//groups.google.com/forum/#!forum/rook-dev">Forum</a>
          <a href="//twitter.com/rook_io">Twitter</a>
        </div>
      </li>
      <li><a href="//blog.rook.io/">Blog</a></li>
      <li><a class="button small" href="/docs/rook/v1.9/quickstart.html">Get Started</a></li>
    </ul>
  </div>
</nav>

    <main id="content" aria-label="Content"><div>



















<section class="docs-header">
  <h1>Ceph</h1>
  <div class="versions">
    <a role="button" href="javascript:void(0)">Rook Ceph v1.6</a>
    <div class="versions-dropdown-content">
      
        <a href="/docs/rook/v1.9/helm-ceph-cluster.html">Rook Ceph v1.9</a>
      
        <a href="/docs/rook/v1.8/helm-ceph-cluster.html">Rook Ceph v1.8</a>
      
        <a href="/docs/rook/v1.7/helm-ceph-cluster.html">Rook Ceph v1.7</a>
      
        <a href="/docs/rook/v1.6/helm-ceph-cluster.html" class="active">Rook Ceph v1.6</a>
      
        <a href="/docs/rook/v1.5/helm-ceph-cluster.html">Rook Ceph v1.5</a>
      
        <a href="/docs/rook/v1.4/helm-ceph-cluster.html">Rook Ceph v1.4</a>
      
        <a href="/docs/rook/v1.3/helm-ceph-cluster.html">Rook Ceph v1.3</a>
      
        <a href="/docs/rook/v1.2/helm-ceph-cluster.html">Rook Ceph v1.2</a>
      
        <a href="/docs/rook/v1.1/helm-ceph-cluster.html">Rook Ceph v1.1</a>
      
        <a href="/docs/rook/v1.0/helm-ceph-cluster.html">Rook Ceph v1.0</a>
      
        <a href="/docs/rook/v0.9/helm-ceph-cluster.html">Rook Ceph v0.9</a>
      
        <a href="/docs/rook/v0.8/helm-ceph-cluster.html">Rook Ceph v0.8</a>
      
        <a href="/docs/rook/v0.7/helm-ceph-cluster.html">Rook Ceph v0.7</a>
      
        <a href="/docs/rook/v0.6/helm-ceph-cluster.html">Rook Ceph v0.6</a>
      
        <a href="/docs/rook/v0.5/helm-ceph-cluster.html">Rook Ceph v0.5</a>
      
        <a href="/docs/rook/latest/helm-ceph-cluster.html">Rook Ceph latest</a>
      
    </div>
    <img src="/images/arrow.svg" />
  </div>
</section>
<div class="page">
  <div class="docs-menu">
      <ul id="docs-ul"></ul>
  </div>
  <div class="docs-content">
    <div class="docs-actions">
      <a id="edit" href="https://github.com/rook/rook/blob/master/Documentation/helm-ceph-cluster.md">Edit on GitHub</a>
    </div>
    
      <div class="alert old">
        <p><b>PLEASE NOTE</b>: This document applies to v1.6 version and not to the latest <strong>stable</strong> release v1.9</p>
      </div>
    
    <div class="docs-text">
      
<h1 id="ceph-cluster-helm-chart">Ceph Cluster Helm Chart</h1>

<p>Install a Rook Ceph cluster using the <a href="https://helm.sh">Helm</a> package manager.</p>

<h2 id="experimental">Experimental</h2>

<p>This chart is released to the community for testing but is considered in experimental. It is currently only available on the <code class="language-plaintext highlighter-rouge">master</code> channel.
Once released (targeted for v1.7), the repository should be updated to the <code class="language-plaintext highlighter-rouge">release</code> channel at that time for the stable branch.</p>

<h2 id="prerequisites">Prerequisites</h2>

<ul>
  <li>Kubernetes 1.13+</li>
  <li>Helm 3.x</li>
  <li>Preinstalled Rook Operator. See the <a href="/docs/rook/v1.6/helm-operator.html">Helm Operator</a> topic to install.</li>
</ul>

<h2 id="installing">Installing</h2>

<p>The <code class="language-plaintext highlighter-rouge">helm install</code> command deploys rook on the Kubernetes cluster in the default configuration.
The <a href="#configuration">configuration</a> section lists the parameters that can be configured during installation. It is
recommended that the rook operator be installed into the <code class="language-plaintext highlighter-rouge">rook-ceph</code> namespace. The clusters can be installed
into the same namespace as the operator or a separate namespace.</p>

<p>If the operator was installed in a namespace other than <code class="language-plaintext highlighter-rouge">rook-ceph</code>, the namespace
must be set in the <code class="language-plaintext highlighter-rouge">operatorNamespace</code> variable.</p>

<p>Rook currently publishes builds of this chart to the <code class="language-plaintext highlighter-rouge">master</code> channel.</p>

<h3 id="master-channel">Master Channel</h3>

<p>The master channel is the most recent release of Rook that includes experimental features.</p>

<p><strong>Before installing, review the values.yaml to confirm if the default settings need to be updated.
The <a href="https://github.com/rook/rook/tree/master/cluster/charts/rook-ceph-cluster/values.yaml">defaults</a>
are only an example and not likely to apply to your cluster.</strong></p>

<p>The example install assumes you have created a values-override.yaml.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">helm repo add rook-master https://charts.rook.io/master
helm install --create-namespace --namespace rook-ceph rook-ceph-cluster \
    --set operatorNamespace=rook-ceph rook-master/rook-ceph-cluster -f values-override.yaml
</span></code></pre></div></div>

<h2 id="configuration">Configuration</h2>

<p>The following tables lists the configurable parameters of the rook-operator chart and their default values.</p>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">operatorNamespace</code></td>
      <td>Namespace of the Rook Operator</td>
      <td><code class="language-plaintext highlighter-rouge">rook-ceph</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">configOverride</code></td>
      <td>Cluster ceph.conf override</td>
      <td><empty></empty></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">toolbox.enabled</code></td>
      <td>Enable Ceph debugging pod deployment. See <a href="/docs/rook/v1.6/ceph-toolbox.html">toolbox</a></td>
      <td><code class="language-plaintext highlighter-rouge">false</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">toolbox.tolerations</code></td>
      <td>Toolbox tolerations</td>
      <td><code class="language-plaintext highlighter-rouge">[]</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">toolbox.affinity</code></td>
      <td>Toolbox affinity</td>
      <td><code class="language-plaintext highlighter-rouge">{}</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">monitoring.enabled</code></td>
      <td>Enable Prometheus integration, will also create necessary RBAC rules</td>
      <td><code class="language-plaintext highlighter-rouge">false</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">cephClusterSpec.*</code></td>
      <td>Cluster configuration, see below</td>
      <td>See below</td>
    </tr>
  </tbody>
</table>

<h3 id="ceph-cluster-spec">Ceph Cluster Spec</h3>

<p>The <code class="language-plaintext highlighter-rouge">CephCluster</code> CRD takes its spec from <code class="language-plaintext highlighter-rouge">cephClusterSpec.*</code>. This is not an exhaustive list of parameters.
For the full list, see the <a href="https://rook.github.io/docs/rook/master/ceph-cluster-crd.html">Cluster CRD</a>.</p>

<h2 id="uninstalling-the-chart">Uninstalling the Chart</h2>

<p>To see the currently installed Rook chart:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">helm ls --namespace rook-ceph
</span></code></pre></div></div>

<p>To uninstall/delete the <code class="language-plaintext highlighter-rouge">rook-ceph-cluster</code> chart:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">helm delete --namespace rook-ceph rook-ceph-cluster
</span></code></pre></div></div>

<p>The command removes all the Kubernetes components associated with the chart and deletes the release. Removing the cluster
chart does not remove the Rook operator. In addition, all data on hosts in the Rook data directory
(<code class="language-plaintext highlighter-rouge">/var/lib/rook</code> by default) and on OSD raw devices is kept. To reuse disks, you will have to wipe them before recreating the cluster.</p>

<p>See the <a href="/docs/rook/v1.6/ceph-teardown.html">teardown documentation</a> for more information.</p>

    </div>
  </div>
</div>

<script>
  var menu = [];
  var BASE_PATH = "";

  function add(name, url, isChild, current) {
    var item = { name: name, url: url, current: current };
    var container = menu;
    if (isChild && menu.length > 0) {
      menu[menu.length-1].children = menu[menu.length-1].children || [];
      container = menu[menu.length-1].children;
      if (current) {
        menu[menu.length-1].childCurrent = true;
      }
    }
    container.push(item);
  }

  
    add(
      "Rook",
      "/docs/rook/v1.6/",
      false,
      false
    );
  
    add(
      "Quickstart",
      "/docs/rook/v1.6/quickstart.html",
      false,
      false
    );
  
    add(
      "Cassandra",
      "/docs/rook/v1.6/cassandra.html",
      true,
      false
    );
  
    add(
      "Ceph Storage",
      "/docs/rook/v1.6/ceph-quickstart.html",
      true,
      false
    );
  
    add(
      "Network Filesystem (NFS)",
      "/docs/rook/v1.6/nfs.html",
      true,
      false
    );
  
    add(
      "Prerequisites",
      "/docs/rook/v1.6/k8s-pre-reqs.html",
      false,
      false
    );
  
    add(
      "FlexVolume Configuration",
      "/docs/rook/v1.6/flexvolume.html",
      true,
      false
    );
  
    add(
      "Ceph Storage",
      "/docs/rook/v1.6/ceph-storage.html",
      false,
      false
    );
  
    add(
      "Prerequisites",
      "/docs/rook/v1.6/ceph-prerequisites.html",
      true,
      false
    );
  
    add(
      "Admission Controller",
      "/docs/rook/v1.6/admission-controller-usage.html",
      true,
      false
    );
  
    add(
      "Examples",
      "/docs/rook/v1.6/ceph-examples.html",
      true,
      false
    );
  
    add(
      "OpenShift",
      "/docs/rook/v1.6/ceph-openshift.html",
      true,
      false
    );
  
    add(
      "Block Storage",
      "/docs/rook/v1.6/ceph-block.html",
      true,
      false
    );
  
    add(
      "Object Storage",
      "/docs/rook/v1.6/ceph-object.html",
      true,
      false
    );
  
    add(
      "Object Multisite",
      "/docs/rook/v1.6/ceph-object-multisite.html",
      true,
      false
    );
  
    add(
      "Shared Filesystem",
      "/docs/rook/v1.6/ceph-filesystem.html",
      true,
      false
    );
  
    add(
      "Ceph Dashboard",
      "/docs/rook/v1.6/ceph-dashboard.html",
      true,
      false
    );
  
    add(
      "Prometheus Monitoring",
      "/docs/rook/v1.6/ceph-monitoring.html",
      true,
      false
    );
  
    add(
      "Cluster CRD",
      "/docs/rook/v1.6/ceph-cluster-crd.html",
      true,
      false
    );
  
    add(
      "Block Pool CRD",
      "/docs/rook/v1.6/ceph-pool-crd.html",
      true,
      false
    );
  
    add(
      "Object Store CRD",
      "/docs/rook/v1.6/ceph-object-store-crd.html",
      true,
      false
    );
  
    add(
      "Object Multisite CRDs",
      "/docs/rook/v1.6/ceph-object-multisite-crd.html",
      true,
      false
    );
  
    add(
      "Object Bucket Claim",
      "/docs/rook/v1.6/ceph-object-bucket-claim.html",
      true,
      false
    );
  
    add(
      "Object Store User CRD",
      "/docs/rook/v1.6/ceph-object-store-user-crd.html",
      true,
      false
    );
  
    add(
      "Shared Filesystem CRD",
      "/docs/rook/v1.6/ceph-filesystem-crd.html",
      true,
      false
    );
  
    add(
      "NFS CRD",
      "/docs/rook/v1.6/ceph-nfs-crd.html",
      true,
      false
    );
  
    add(
      "Ceph CSI",
      "/docs/rook/v1.6/ceph-csi-drivers.html",
      true,
      false
    );
  
    add(
      "Snapshots",
      "/docs/rook/v1.6/ceph-csi-snapshot.html",
      true,
      false
    );
  
    add(
      "Volume clone",
      "/docs/rook/v1.6/ceph-csi-volume-clone.html",
      true,
      false
    );
  
    add(
      "RBDMirror CRD",
      "/docs/rook/v1.6/ceph-rbd-mirror-crd.html",
      true,
      false
    );
  
    add(
      "Client CRD",
      "/docs/rook/v1.6/ceph-client-crd.html",
      true,
      false
    );
  
    add(
      "FilesystemMirror CRD",
      "/docs/rook/v1.6/ceph-fs-mirror-crd.html",
      true,
      false
    );
  
    add(
      "Configuration",
      "/docs/rook/v1.6/ceph-configuration.html",
      true,
      false
    );
  
    add(
      "Upgrades",
      "/docs/rook/v1.6/ceph-upgrade.html",
      true,
      false
    );
  
    add(
      "Cleanup",
      "/docs/rook/v1.6/ceph-teardown.html",
      true,
      false
    );
  
    add(
      "Cassandra Cluster CRD",
      "/docs/rook/v1.6/cassandra-cluster-crd.html",
      false,
      false
    );
  
    add(
      "Upgrade",
      "/docs/rook/v1.6/cassandra-operator-upgrade.html",
      true,
      false
    );
  
    add(
      "NFS Server CRD",
      "/docs/rook/v1.6/nfs-crd.html",
      false,
      false
    );
  
    add(
      "Helm Charts",
      "/docs/rook/v1.6/helm.html",
      false,
      false
    );
  
    add(
      "Ceph Operator",
      "/docs/rook/v1.6/helm-operator.html",
      true,
      false
    );
  
    add(
      "Ceph Cluster",
      "/docs/rook/v1.6/helm-ceph-cluster.html",
      true,
      true
    );
  
    add(
      "Common Issues",
      "/docs/rook/v1.6/common-issues.html",
      false,
      false
    );
  
    add(
      "Ceph Tools",
      "/docs/rook/v1.6/ceph-tools.html",
      false,
      false
    );
  
    add(
      "Toolbox",
      "/docs/rook/v1.6/ceph-toolbox.html",
      true,
      false
    );
  
    add(
      "Common Issues",
      "/docs/rook/v1.6/ceph-common-issues.html",
      true,
      false
    );
  
    add(
      "CSI Common Issues",
      "/docs/rook/v1.6/ceph-csi-troubleshooting.html",
      true,
      false
    );
  
    add(
      "Monitor Health",
      "/docs/rook/v1.6/ceph-mon-health.html",
      true,
      false
    );
  
    add(
      "OSD Management",
      "/docs/rook/v1.6/ceph-osd-mgmt.html",
      true,
      false
    );
  
    add(
      "Direct Tools",
      "/docs/rook/v1.6/direct-tools.html",
      true,
      false
    );
  
    add(
      "Advanced Configuration",
      "/docs/rook/v1.6/ceph-advanced-configuration.html",
      true,
      false
    );
  
    add(
      "OpenShift Common Issues",
      "/docs/rook/v1.6/ceph-openshift-issues.html",
      true,
      false
    );
  
    add(
      "Disaster Recovery",
      "/docs/rook/v1.6/ceph-disaster-recovery.html",
      true,
      false
    );
  
    add(
      "Tectonic Configuration",
      "/docs/rook/v1.6/tectonic.html",
      true,
      false
    );
  
    add(
      "Contributing",
      "/docs/rook/v1.6/development-flow.html",
      false,
      false
    );
  
    add(
      "Storage Providers",
      "/docs/rook/v1.6/storage-providers.html",
      true,
      false
    );
  
    add(
      "Multi-Node Test Environment",
      "/docs/rook/v1.6/development-environment.html",
      true,
      false
    );
  

  function getEntry(item) {
    var itemDom = document.createElement('li');

    if (item.current) {
      itemDom.innerHTML = item.name;
      itemDom.classList.add('current');
    } else {
      itemDom.innerHTML = '<a href="' + item.url + '">' + item.name + '</a>';
    }

    return itemDom;
  }

  // Flush css changes as explained in: https://stackoverflow.com/a/34726346
  // and more completely: https://stackoverflow.com/a/6956049
  function flushCss(element) {
    element.offsetHeight;
  }

  function addArrow(itemDom) {
    var MAIN_ITEM_HEIGHT = 24;
    var BOTTOM_PADDING = 20;
    var arrowDom = document.createElement('a');
    arrowDom.classList.add('arrow');
    arrowDom.innerHTML = '<img src="' + BASE_PATH + '/images/arrow.svg" />';
    arrowDom.onclick = function(itemDom) {
      return function () {
        // Calculated full height of the opened list
        var fullHeight = MAIN_ITEM_HEIGHT + BOTTOM_PADDING + itemDom.lastChild.clientHeight + 'px';

        itemDom.classList.toggle('open');

        if (itemDom.classList.contains('open')) {
          itemDom.style.height = fullHeight;
        } else {
          // If the list height is auto we have to set it to fullHeight
          // without tranistion before we shrink it to collapsed height
          if (itemDom.style.height === 'auto') {
            itemDom.style.transition = 'none';
            itemDom.style.height = fullHeight;
            flushCss(itemDom);
            itemDom.style.transition = '';
          }
          itemDom.style.height = MAIN_ITEM_HEIGHT + 'px';
        }

        return false;
      };
    }(itemDom);
    itemDom.appendChild(arrowDom);

    if ((item.current && item.children) || item.childCurrent) {
      itemDom.classList.add('open');
      itemDom.style.height = 'auto';
    } else {
      itemDom.style.height = MAIN_ITEM_HEIGHT + 'px';
    }
  }

  var menuDom = document.getElementById('docs-ul');
  for (var i = 0; i < menu.length; i++) {
    var item = menu[i];
    var itemDom = getEntry(item);

    if (item.childCurrent) {
      itemDom.classList.add('childCurrent');
    }

    if (item.children) {
      addArrow(itemDom);
      itemDom.classList.add('children');
      var children = document.createElement('ul');
      for (var j = 0; j < item.children.length; j++) {
        children.appendChild(getEntry(item.children[j]));
      }
      itemDom.appendChild(children);
    }
    menuDom.appendChild(itemDom);
  }
</script>
</div></main>
    <footer id="footer" aria-label="Footer">
  <div class="top">
    <a href="//www.cncf.io">
      <img
        class="cncf"
        src="/images/cncf.png"
        srcset="/images/cncf@2x.png 2x, /images/cncf@3x.png 3x" />
    </a>
    <p>We are a Cloud Native Computing Foundation graduated project.</p>
  </div>
  <div class="middle">
    <div class="grid-center">
      <div class="col_sm-12">
        <span>Getting Started</span>
        <a href="//github.com/rook/rook">GitHub</a>
        <a href="/docs/rook/v1.9/">Documentation</a>
        <a href="//github.com/rook/rook/blob/master/CONTRIBUTING.md#how-to-contribute">How to Contribute</a>
      </div>
      <div class="col_sm-12">
        <span>Community</span>
        <a href="//slack.rook.io/">Slack</a>
        <a href="//twitter.com/rook_io">Twitter</a>
        <a href="//groups.google.com/forum/#!forum/rook-dev">Forum</a>
        <a href="//blog.rook.io/">Blog</a>
      </div>
      <div class="col_sm-12">
        <span>Contact</span>
        <a href="mailto:cncf-rook-info@lists.cncf.io">Email</a>
        <a href="//github.com/rook/rook/issues">Feature request</a>
      </div>
      <div class="col_sm-12">
        <span>Top Contributors</span>
        <a href="//cloudical.io/">Cloudical</a>
        <a href="//cybozu.com">Cybozu, Inc</a>
        <a href="//www.redhat.com">Red Hat</a>
        <a href="//www.suse.com/">SUSE</a>
        <a href="//upbound.io">Upbound</a>
      </div>
    </div>
  </div>
  <div class="bottom">
    <div class="grid-center">
      <div class="col-8">
        <a class="logo" href="/">
          <img src="/images/rook-logo-small.svg" alt="rook.io" />
        </a>
        <p>
          &#169; Rook Authors 2022. Documentation distributed under
          <a href="https://creativecommons.org/licenses/by/4.0">CC-BY-4.0</a>.
        </p>
        <p>
          &#169; 2022 The Linux Foundation. All rights reserved. The Linux Foundation has
          registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our
          <a href="https://www.linuxfoundation.org/trademark-usage/">Trademark Usage</a> page.
        </p>
      </div>
    </div>
  </div>
</footer>


  <script src="/js/anchor.js"></script>
  <script>
    anchors.options = {
      placement: 'right',
      icon: '#',
    }

    document.addEventListener('DOMContentLoaded', function(event) {
      anchors.add('.docs-text h1, .docs-text h2, .docs-text h3, .docs-text h4, .docs-text h5, .docs-text h6');
    });
  </script>




    
  </body>
</html>
