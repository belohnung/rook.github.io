












































<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />

    
    <meta name="robots" content="noindex">
    

    <title>Ceph Docs</title>

    <link rel="canonical" href="https://rook.io/docs/rook/v0.7/client.html">

    <link rel="icon" href="/favicon.ico" />
<link rel="icon" type="image/png" href="/images/favicon_16x16.png" sizes="16x16" />
<link rel="icon" type="image/png" href="/images/favicon_32x32.png" sizes="32x32" />
<link rel="icon" type="image/png" href="/images/favicon_48x48.png" sizes="48x48" />
<link rel="icon" type="image/png" href="/images/favicon_192x192.png" sizes="192x192" />


    <link href="//fonts.googleapis.com/css?family=Montserrat:500|Open+Sans:300,400,600" rel="stylesheet">
    
    <link rel="stylesheet" href="/css/main.css">
    
      <link rel="stylesheet" href="/css/docs.css" />
    
  </head>
  <body>
    <nav id="navigation" aria-label="Navigation">
  <div>
    <div class="logo">
      <a href="/"><img src="/images/rook-logo.svg"/></a>
    </div>
    <div
      class="hamburger-controls"
      onclick="if (document.body.classList.contains('menu-open')) { document.body.classList.remove('menu-open') } else { document.body.classList.add('menu-open') }; return false;">
      <span></span> <span></span> <span></span>
    </div>
    <ul class="links">
      <li class="dropdown">
        <a role="button" href="javascript:void(0)">Documentation</a>
        <div class="dropdown-content">
          <a href="/docs/rook/v1.9/">Ceph</a>
          <a href="/docs/cassandra/v1.7/">Cassandra</a>
          <a href="/docs/nfs/v1.7/">NFS</a>
        </div>
      <li class="dropdown">
        <a role="button" href="javascript:void(0)">Community</a>
        <div class="dropdown-content">
          <a href="//github.com/rook/rook">GitHub</a>
          <a href="//slack.rook.io/">Slack</a>
          <a href="//groups.google.com/forum/#!forum/rook-dev">Forum</a>
          <a href="//twitter.com/rook_io">Twitter</a>
        </div>
      </li>
      <li><a href="//blog.rook.io/">Blog</a></li>
      <li><a class="button small" href="/docs/rook/v1.9/quickstart.html">Get Started</a></li>
    </ul>
  </div>
</nav>

    <main id="content" aria-label="Content"><div>



















<section class="docs-header">
  <h1>Ceph</h1>
  <div class="versions">
    <a role="button" href="javascript:void(0)">Rook Ceph v0.7</a>
    <div class="versions-dropdown-content">
      
        <a href="/docs/rook/v1.9/client.html">Rook Ceph v1.9</a>
      
        <a href="/docs/rook/v1.8/client.html">Rook Ceph v1.8</a>
      
        <a href="/docs/rook/v1.7/client.html">Rook Ceph v1.7</a>
      
        <a href="/docs/rook/v1.6/client.html">Rook Ceph v1.6</a>
      
        <a href="/docs/rook/v1.5/client.html">Rook Ceph v1.5</a>
      
        <a href="/docs/rook/v1.4/client.html">Rook Ceph v1.4</a>
      
        <a href="/docs/rook/v1.3/client.html">Rook Ceph v1.3</a>
      
        <a href="/docs/rook/v1.2/client.html">Rook Ceph v1.2</a>
      
        <a href="/docs/rook/v1.1/client.html">Rook Ceph v1.1</a>
      
        <a href="/docs/rook/v1.0/client.html">Rook Ceph v1.0</a>
      
        <a href="/docs/rook/v0.9/client.html">Rook Ceph v0.9</a>
      
        <a href="/docs/rook/v0.8/client.html">Rook Ceph v0.8</a>
      
        <a href="/docs/rook/v0.7/client.html" class="active">Rook Ceph v0.7</a>
      
        <a href="/docs/rook/v0.6/client.html">Rook Ceph v0.6</a>
      
        <a href="/docs/rook/v0.5/client.html">Rook Ceph v0.5</a>
      
        <a href="/docs/rook/latest/client.html">Rook Ceph latest</a>
      
    </div>
    <img src="/images/arrow.svg" />
  </div>
</section>
<div class="page">
  <div class="docs-menu">
      <ul id="docs-ul"></ul>
  </div>
  <div class="docs-content">
    <div class="docs-actions">
      <a id="edit" href="https://github.com/rook/rook/blob/master/Documentation/client.md">Edit on GitHub</a>
    </div>
    
      <div class="alert old">
        <p><b>PLEASE NOTE</b>: This document applies to v0.7 version and not to the latest <strong>stable</strong> release v1.9</p>
      </div>
    
    <div class="docs-text">
      <h1 id="rook-client">Rook Client</h1>

<p>** <strong>rookctl has been deprecated. <a href="/docs/rook/v0.7/crds.html">CRDs</a> are the recommended way to configure the cluster.</strong> **</p>

<p>The <code class="language-plaintext highlighter-rouge">rookctl</code> client tool can be used to manage your Rook cluster once it is running as well as manage block, file and object storage.  See the sections below for details on how to configure each type of storage.</p>

<p>If you donâ€™t yet have a Rook cluster running, refer to our <a href="../README.md#quickstart-guides">Quickstart Guides</a>.</p>

<p><code class="language-plaintext highlighter-rouge">rookctl</code> can be accessed in the following ways:</p>

<ul>
  <li>Kubernetes: Start the <a href="/docs/rook/v0.7/toolbox.html">toolbox</a> pod</li>
</ul>

<h2 id="block-storage">Block Storage</h2>

<ol>
  <li>
    <p>Create a new pool and volume image (10MB)</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> rookctl pool create <span class="nt">--name</span> rbd <span class="nt">--replica-count</span> 1
 rookctl block create <span class="nt">--name</span> <span class="nb">test</span> <span class="nt">--size</span> 10485760
</code></pre></div>    </div>
  </li>
  <li>
    <p>Map the block volume and format it and mount it</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c"># If running in the toolbox container, no need to run privileged</span>
 rookctl block map <span class="nt">--name</span> <span class="nb">test</span> <span class="nt">--format</span> <span class="nt">--mount</span> /tmp/rook-volume
</code></pre></div>    </div>
  </li>
  <li>
    <p>Write and read a file</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nb">echo</span> <span class="s2">"Hello Rook!"</span> <span class="o">&gt;</span> /tmp/rook-volume/hello
 <span class="nb">cat</span> /tmp/rook-volume/hello
</code></pre></div>    </div>
  </li>
  <li>
    <p>Cleanup</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c"># If running in the toolbox container, no need to run privileged</span>
 rookctl block unmap <span class="nt">--mount</span> /tmp/rook-volume
</code></pre></div>    </div>
  </li>
</ol>

<h2 id="shared-file-system">Shared File System</h2>

<ol>
  <li>
    <p>Create a shared file system</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> rookctl filesystem create <span class="nt">--name</span> testfs <span class="nt">--data-replica-count</span> 1 <span class="nt">--metadata-replica-count</span> 1
</code></pre></div>    </div>
  </li>
  <li>
    <p>Verify the shared file system was created</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rookctl filesystem <span class="nb">ls</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Mount the shared file system from the cluster to your local machine</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># If running in the toolbox container, no need to run privileged</span>
rookctl filesystem mount <span class="nt">--name</span> testfs <span class="nt">--path</span> /tmp/rookFS
</code></pre></div>    </div>
  </li>
  <li>
    <p>Write and read a file to the shared file system</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo</span> <span class="s2">"Hello Rook!"</span> <span class="o">&gt;</span> /tmp/rookFS/hello
<span class="nb">cat</span> /tmp/rookFS/hello
</code></pre></div>    </div>
  </li>
  <li>
    <p>Unmount the shared file system (this does <strong>not</strong> delete the data from the cluster)</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># If running in the toolbox container, no need to run privileged</span>
rookctl filesystem unmount <span class="nt">--path</span> /tmp/rookFS
</code></pre></div>    </div>
  </li>
  <li>
    <p>Cleanup the shared file system from the cluster (this <strong>does</strong> delete the data from the cluster)</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rookctl filesystem delete --name testfs
</code></pre></div>    </div>
  </li>
</ol>

<h2 id="object-storage">Object Storage</h2>

<ol>
  <li>
    <p>Create an object storage instance in the cluster</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rookctl object create <span class="nt">-n</span> my-store <span class="nt">--data-replica-count</span> 1 <span class="nt">--metadata-replica-count</span> 1
</code></pre></div>    </div>
  </li>
  <li>
    <p>Create an object storage user</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rookctl object user create my-store rook-user <span class="s2">"my object store user"</span>
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="consume-the-object-storage">Consume the Object Storage</h3>

<p>Use an S3 compatible client to create a bucket in the object store. If you are running in Kubernetes,
the s3cmd tool is included in the <a href="/docs/rook/v0.7/toolbox.html">Rook toolbox</a> pod.</p>

<ol>
  <li>
    <p>Get the connection information for accessing object storage</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">eval</span> <span class="si">$(</span>rookctl object connection my-store rook-user <span class="nt">--format</span> env-var<span class="si">)</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Create a bucket in the object store</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>s3cmd mb <span class="nt">--no-ssl</span> <span class="nt">--host</span><span class="o">=</span><span class="k">${</span><span class="nv">AWS_HOST</span><span class="k">}</span> <span class="nt">--host-bucket</span><span class="o">=</span>  s3://rookbucket
</code></pre></div>    </div>
  </li>
  <li>
    <p>List buckets in the object store</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rookctl object bucket list my-store
</code></pre></div>    </div>
  </li>
  <li>
    <p>Upload a file to the newly created bucket</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo</span> <span class="s2">"Hello Rook!"</span> <span class="o">&gt;</span> /tmp/rookObj
s3cmd put /tmp/rookObj <span class="nt">--no-ssl</span> <span class="nt">--host</span><span class="o">=</span><span class="k">${</span><span class="nv">AWS_HOST</span><span class="k">}</span> <span class="nt">--host-bucket</span><span class="o">=</span>  s3://rookbucket
</code></pre></div>    </div>
  </li>
  <li>
    <p>Download and verify the file from the bucket</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>s3cmd get s3://rookbucket/rookObj /tmp/rookObj-download <span class="nt">--no-ssl</span> <span class="nt">--host</span><span class="o">=</span><span class="k">${</span><span class="nv">AWS_HOST</span><span class="k">}</span> <span class="nt">--host-bucket</span><span class="o">=</span>
<span class="nb">cat</span> /tmp/rookObj-download
</code></pre></div>    </div>
  </li>
</ol>

    </div>
  </div>
</div>

<script>
  var menu = [];
  var BASE_PATH = "";

  function add(name, url, isChild, current) {
    var item = { name: name, url: url, current: current };
    var container = menu;
    if (isChild && menu.length > 0) {
      menu[menu.length-1].children = menu[menu.length-1].children || [];
      container = menu[menu.length-1].children;
      if (current) {
        menu[menu.length-1].childCurrent = true;
      }
    }
    container.push(item);
  }

  
    add(
      "Rook",
      "/docs/rook/v0.7/",
      false,
      false
    );
  
    add(
      "Quickstart",
      "/docs/rook/v0.7/quickstart.html",
      false,
      false
    );
  
    add(
      "Cleanup",
      "/docs/rook/v0.7/teardown.html",
      true,
      false
    );
  
    add(
      "Prerequisites",
      "/docs/rook/v0.7/k8s-pre-reqs.html",
      false,
      false
    );
  
    add(
      "Flex Volume Configuration",
      "/docs/rook/v0.7/flexvolume.html",
      true,
      false
    );
  
    add(
      "RBAC Security",
      "/docs/rook/v0.7/rbac.html",
      true,
      false
    );
  
    add(
      "Tectonic Bare Metal",
      "/docs/rook/v0.7/tectonic.html",
      true,
      false
    );
  
    add(
      "Storage",
      "/docs/rook/v0.7/storage.html",
      false,
      false
    );
  
    add(
      "Block Storage",
      "/docs/rook/v0.7/block.html",
      true,
      false
    );
  
    add(
      "Object Storage",
      "/docs/rook/v0.7/object.html",
      true,
      false
    );
  
    add(
      "Shared File System",
      "/docs/rook/v0.7/filesystem.html",
      true,
      false
    );
  
    add(
      "Custom Resources",
      "/docs/rook/v0.7/crds.html",
      false,
      false
    );
  
    add(
      "Cluster",
      "/docs/rook/v0.7/cluster-crd.html",
      true,
      false
    );
  
    add(
      "Pool",
      "/docs/rook/v0.7/pool-crd.html",
      true,
      false
    );
  
    add(
      "Object Store",
      "/docs/rook/v0.7/object-store-crd.html",
      true,
      false
    );
  
    add(
      "Shared File System",
      "/docs/rook/v0.7/filesystem-crd.html",
      true,
      false
    );
  
    add(
      "Monitoring",
      "/docs/rook/v0.7/monitoring.html",
      false,
      false
    );
  
    add(
      "Helm Charts",
      "/docs/rook/v0.7/helm.html",
      false,
      false
    );
  
    add(
      "Operator",
      "/docs/rook/v0.7/helm-operator.html",
      true,
      false
    );
  
    add(
      "Upgrades",
      "/docs/rook/v0.7/upgrade.html",
      false,
      false
    );
  
    add(
      "Tools",
      "/docs/rook/v0.7/tools.html",
      false,
      false
    );
  
    add(
      "Toolbox",
      "/docs/rook/v0.7/toolbox.html",
      true,
      false
    );
  
    add(
      "Rook Client",
      "/docs/rook/v0.7/client.html",
      true,
      true
    );
  
    add(
      "Advanced Configuration",
      "/docs/rook/v0.7/advanced-configuration.html",
      true,
      false
    );
  
    add(
      "Common Issues",
      "/docs/rook/v0.7/common-problems.html",
      true,
      false
    );
  
    add(
      "Contributing",
      "/docs/rook/v0.7/development-flow.html",
      false,
      false
    );
  
    add(
      "Multi-Node Test Environment",
      "/docs/rook/v0.7/development-environment.html",
      true,
      false
    );
  

  function getEntry(item) {
    var itemDom = document.createElement('li');

    if (item.current) {
      itemDom.innerHTML = item.name;
      itemDom.classList.add('current');
    } else {
      itemDom.innerHTML = '<a href="' + item.url + '">' + item.name + '</a>';
    }

    return itemDom;
  }

  // Flush css changes as explained in: https://stackoverflow.com/a/34726346
  // and more completely: https://stackoverflow.com/a/6956049
  function flushCss(element) {
    element.offsetHeight;
  }

  function addArrow(itemDom) {
    var MAIN_ITEM_HEIGHT = 24;
    var BOTTOM_PADDING = 20;
    var arrowDom = document.createElement('a');
    arrowDom.classList.add('arrow');
    arrowDom.innerHTML = '<img src="' + BASE_PATH + '/images/arrow.svg" />';
    arrowDom.onclick = function(itemDom) {
      return function () {
        // Calculated full height of the opened list
        var fullHeight = MAIN_ITEM_HEIGHT + BOTTOM_PADDING + itemDom.lastChild.clientHeight + 'px';

        itemDom.classList.toggle('open');

        if (itemDom.classList.contains('open')) {
          itemDom.style.height = fullHeight;
        } else {
          // If the list height is auto we have to set it to fullHeight
          // without tranistion before we shrink it to collapsed height
          if (itemDom.style.height === 'auto') {
            itemDom.style.transition = 'none';
            itemDom.style.height = fullHeight;
            flushCss(itemDom);
            itemDom.style.transition = '';
          }
          itemDom.style.height = MAIN_ITEM_HEIGHT + 'px';
        }

        return false;
      };
    }(itemDom);
    itemDom.appendChild(arrowDom);

    if ((item.current && item.children) || item.childCurrent) {
      itemDom.classList.add('open');
      itemDom.style.height = 'auto';
    } else {
      itemDom.style.height = MAIN_ITEM_HEIGHT + 'px';
    }
  }

  var menuDom = document.getElementById('docs-ul');
  for (var i = 0; i < menu.length; i++) {
    var item = menu[i];
    var itemDom = getEntry(item);

    if (item.childCurrent) {
      itemDom.classList.add('childCurrent');
    }

    if (item.children) {
      addArrow(itemDom);
      itemDom.classList.add('children');
      var children = document.createElement('ul');
      for (var j = 0; j < item.children.length; j++) {
        children.appendChild(getEntry(item.children[j]));
      }
      itemDom.appendChild(children);
    }
    menuDom.appendChild(itemDom);
  }
</script>
</div></main>
    <footer id="footer" aria-label="Footer">
  <div class="top">
    <a href="//www.cncf.io">
      <img
        class="cncf"
        src="/images/cncf.png"
        srcset="/images/cncf@2x.png 2x, /images/cncf@3x.png 3x" />
    </a>
    <p>We are a Cloud Native Computing Foundation graduated project.</p>
  </div>
  <div class="middle">
    <div class="grid-center">
      <div class="col_sm-12">
        <span>Getting Started</span>
        <a href="//github.com/rook/rook">GitHub</a>
        <a href="/docs/rook/v1.9/">Documentation</a>
        <a href="//github.com/rook/rook/blob/master/CONTRIBUTING.md#how-to-contribute">How to Contribute</a>
      </div>
      <div class="col_sm-12">
        <span>Community</span>
        <a href="//slack.rook.io/">Slack</a>
        <a href="//twitter.com/rook_io">Twitter</a>
        <a href="//groups.google.com/forum/#!forum/rook-dev">Forum</a>
        <a href="//blog.rook.io/">Blog</a>
      </div>
      <div class="col_sm-12">
        <span>Contact</span>
        <a href="mailto:cncf-rook-info@lists.cncf.io">Email</a>
        <a href="//github.com/rook/rook/issues">Feature request</a>
      </div>
      <div class="col_sm-12">
        <span>Top Contributors</span>
        <a href="//cloudical.io/">Cloudical</a>
        <a href="//cybozu.com">Cybozu, Inc</a>
        <a href="//www.redhat.com">Red Hat</a>
        <a href="//www.suse.com/">SUSE</a>
        <a href="//upbound.io">Upbound</a>
      </div>
    </div>
  </div>
  <div class="bottom">
    <div class="grid-center">
      <div class="col-8">
        <a class="logo" href="/">
          <img src="/images/rook-logo-small.svg" alt="rook.io" />
        </a>
        <p>
          &#169; Rook Authors 2022. Documentation distributed under
          <a href="https://creativecommons.org/licenses/by/4.0">CC-BY-4.0</a>.
        </p>
        <p>
          &#169; 2022 The Linux Foundation. All rights reserved. The Linux Foundation has
          registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our
          <a href="https://www.linuxfoundation.org/trademark-usage/">Trademark Usage</a> page.
        </p>
      </div>
    </div>
  </div>
</footer>


  <script src="/js/anchor.js"></script>
  <script>
    anchors.options = {
      placement: 'right',
      icon: '#',
    }

    document.addEventListener('DOMContentLoaded', function(event) {
      anchors.add('.docs-text h1, .docs-text h2, .docs-text h3, .docs-text h4, .docs-text h5, .docs-text h6');
    });
  </script>




    
  </body>
</html>
