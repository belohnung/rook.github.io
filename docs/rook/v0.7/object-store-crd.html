












































<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />

    
    <meta name="robots" content="noindex">
    

    <title>Ceph Docs</title>

    <link rel="canonical" href="https://rook.io/docs/rook/v0.7/object-store-crd.html">

    <link rel="icon" href="/favicon.ico" />
<link rel="icon" type="image/png" href="/images/favicon_16x16.png" sizes="16x16" />
<link rel="icon" type="image/png" href="/images/favicon_32x32.png" sizes="32x32" />
<link rel="icon" type="image/png" href="/images/favicon_48x48.png" sizes="48x48" />
<link rel="icon" type="image/png" href="/images/favicon_192x192.png" sizes="192x192" />


    <link href="//fonts.googleapis.com/css?family=Montserrat:500|Open+Sans:300,400,600" rel="stylesheet">
    
    <link rel="stylesheet" href="/css/main.css">
    
      <link rel="stylesheet" href="/css/docs.css" />
    
  </head>
  <body>
    <nav id="navigation" aria-label="Navigation">
  <div>
    <div class="logo">
      <a href="/"><img src="/images/rook-logo.svg"/></a>
    </div>
    <div
      class="hamburger-controls"
      onclick="if (document.body.classList.contains('menu-open')) { document.body.classList.remove('menu-open') } else { document.body.classList.add('menu-open') }; return false;">
      <span></span> <span></span> <span></span>
    </div>
    <ul class="links">
      <li class="dropdown">
        <a role="button" href="javascript:void(0)">Documentation</a>
        <div class="dropdown-content">
          <a href="/docs/rook/v1.9/">Ceph</a>
          <a href="/docs/cassandra/v1.7/">Cassandra</a>
          <a href="/docs/nfs/v1.7/">NFS</a>
        </div>
      <li class="dropdown">
        <a role="button" href="javascript:void(0)">Community</a>
        <div class="dropdown-content">
          <a href="//github.com/rook/rook">GitHub</a>
          <a href="//slack.rook.io/">Slack</a>
          <a href="//groups.google.com/forum/#!forum/rook-dev">Forum</a>
          <a href="//twitter.com/rook_io">Twitter</a>
        </div>
      </li>
      <li><a href="//blog.rook.io/">Blog</a></li>
      <li><a class="button small" href="/docs/rook/v1.9/quickstart.html">Get Started</a></li>
    </ul>
  </div>
</nav>

    <main id="content" aria-label="Content"><div>



















<section class="docs-header">
  <h1>Ceph</h1>
  <div class="versions">
    <a role="button" href="javascript:void(0)">Rook Ceph v0.7</a>
    <div class="versions-dropdown-content">
      
        <a href="/docs/rook/v1.9/object-store-crd.html">Rook Ceph v1.9</a>
      
        <a href="/docs/rook/v1.8/object-store-crd.html">Rook Ceph v1.8</a>
      
        <a href="/docs/rook/v1.7/object-store-crd.html">Rook Ceph v1.7</a>
      
        <a href="/docs/rook/v1.6/object-store-crd.html">Rook Ceph v1.6</a>
      
        <a href="/docs/rook/v1.5/object-store-crd.html">Rook Ceph v1.5</a>
      
        <a href="/docs/rook/v1.4/object-store-crd.html">Rook Ceph v1.4</a>
      
        <a href="/docs/rook/v1.3/object-store-crd.html">Rook Ceph v1.3</a>
      
        <a href="/docs/rook/v1.2/object-store-crd.html">Rook Ceph v1.2</a>
      
        <a href="/docs/rook/v1.1/object-store-crd.html">Rook Ceph v1.1</a>
      
        <a href="/docs/rook/v1.0/object-store-crd.html">Rook Ceph v1.0</a>
      
        <a href="/docs/rook/v0.9/object-store-crd.html">Rook Ceph v0.9</a>
      
        <a href="/docs/rook/v0.8/object-store-crd.html">Rook Ceph v0.8</a>
      
        <a href="/docs/rook/v0.7/object-store-crd.html" class="active">Rook Ceph v0.7</a>
      
        <a href="/docs/rook/v0.6/object-store-crd.html">Rook Ceph v0.6</a>
      
        <a href="/docs/rook/v0.5/object-store-crd.html">Rook Ceph v0.5</a>
      
        <a href="/docs/rook/latest/object-store-crd.html">Rook Ceph latest</a>
      
    </div>
    <img src="/images/arrow.svg" />
  </div>
</section>
<div class="page">
  <div class="docs-menu">
      <ul id="docs-ul"></ul>
  </div>
  <div class="docs-content">
    <div class="docs-actions">
      <a id="edit" href="https://github.com/rook/rook/blob/master/Documentation/object-store-crd.md">Edit on GitHub</a>
    </div>
    
      <div class="alert old">
        <p><b>PLEASE NOTE</b>: This document applies to v0.7 version and not to the latest <strong>stable</strong> release v1.9</p>
      </div>
    
    <div class="docs-text">
      <h1 id="object-store-crd">Object Store CRD</h1>

<p>Rook allows creation and customization of object stores through the custom resource definitions (CRDs). The following settings are available
for object stores.</p>

<h2 id="sample">Sample</h2>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">rook.io/v1alpha1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ObjectStore</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">my-store</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">rook</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">metadataPool</span><span class="pi">:</span>
    <span class="na">replicated</span><span class="pi">:</span>
      <span class="na">size</span><span class="pi">:</span> <span class="m">3</span>
  <span class="na">dataPool</span><span class="pi">:</span>
    <span class="na">erasureCoded</span><span class="pi">:</span>
      <span class="na">dataChunks</span><span class="pi">:</span> <span class="m">2</span>
      <span class="na">codingChunks</span><span class="pi">:</span> <span class="m">1</span>
  <span class="na">gateway</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">s3</span>
    <span class="na">sslCertificateRef</span><span class="pi">:</span>
    <span class="na">port</span><span class="pi">:</span> <span class="m">80</span>
    <span class="na">securePort</span><span class="pi">:</span>
    <span class="na">instances</span><span class="pi">:</span> <span class="m">1</span>
    <span class="na">allNodes</span><span class="pi">:</span> <span class="no">false</span>
    <span class="na">placement</span><span class="pi">:</span>
    <span class="c1">#  nodeAffinity:</span>
    <span class="c1">#    requiredDuringSchedulingIgnoredDuringExecution:</span>
    <span class="c1">#      nodeSelectorTerms:</span>
    <span class="c1">#      - matchExpressions:</span>
    <span class="c1">#        - key: role</span>
    <span class="c1">#          operator: In</span>
    <span class="c1">#          values:</span>
    <span class="c1">#          - rgw-node</span>
    <span class="c1">#  tolerations:</span>
    <span class="c1">#  - key: rgw-node</span>
    <span class="c1">#    operator: Exists</span>
    <span class="c1">#  podAffinity:</span>
    <span class="c1">#  podAntiAffinity:</span>
    <span class="na">resources</span><span class="pi">:</span>
    <span class="c1">#  limits:</span>
    <span class="c1">#    cpu: "500m"</span>
    <span class="c1">#    memory: "1024Mi"</span>
    <span class="c1">#  requests:</span>
    <span class="c1">#    cpu: "500m"</span>
    <span class="c1">#    memory: "1024Mi"</span>
</code></pre></div></div>

<h2 id="object-store-settings">Object Store Settings</h2>

<h3 id="kind">Kind</h3>
<p>If you are using a version of Kubernetes <strong>earlier than 1.7</strong>, you will need to slightly modify the <code class="language-plaintext highlighter-rouge">kind</code> to be compatible with TPRs (deprecated in 1.7). Notice the different casing.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">kind</span><span class="pi">:</span> <span class="s">Objectstore</span>
</code></pre></div></div>

<h3 id="metadata">Metadata</h3>

<ul>
  <li><code class="language-plaintext highlighter-rouge">name</code>: The name of the object store to create, which will be reflected in the pool and other resource names.</li>
  <li><code class="language-plaintext highlighter-rouge">namespace</code>: The namespace of the Rook cluster where the object store is created.</li>
</ul>

<h3 id="pools">Pools</h3>

<p>The pools allow all of the settings defined in the Pool CRD spec. For more details, see the <a href="/docs/rook/v0.7/pool-crd.html">Pool CRD</a> settings. In the example above, there must be at least three hosts (size 3) and at least three devices (2 data + 1 coding chunks) in the cluster.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">metadataPool</code>: The settings used to create all of the object store metadata pools. Must use replication.</li>
  <li><code class="language-plaintext highlighter-rouge">dataPool</code>: The settings to create the object store data pool. Can use replication or erasure coding.</li>
</ul>

<h2 id="gateway-settings">Gateway Settings</h2>

<p>The gateway settings correspond to the RGW daemon settings.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">type</code>: <code class="language-plaintext highlighter-rouge">S3</code> is supported</li>
  <li><code class="language-plaintext highlighter-rouge">sslCertificateRef</code>: If the certificate is not specified, SSL will not be configured. If specified, this is the name of the Kubernetes secret that contains the SSL certificate to be used for secure connections to the object store. Rook will look in the secret provided at the <code class="language-plaintext highlighter-rouge">cert</code> key name. The value of the <code class="language-plaintext highlighter-rouge">cert</code> key must be in the format expected by the <a href="http://docs.ceph.com/docs/master/install/install-ceph-gateway/#using-ssl-with-civetweb">RGW service</a>: “The server key, server certificate, and any other CA or intermediate certificates be supplied in one file. Each of these items must be in pem form.”</li>
  <li><code class="language-plaintext highlighter-rouge">port</code>: The port on which the RGW pods and the RGW service will be listening (not encrypted).</li>
  <li><code class="language-plaintext highlighter-rouge">securePort</code>: The secure port on which RGW pods will be listening. An SSL certificate must be specified.</li>
  <li><code class="language-plaintext highlighter-rouge">instances</code>: The number of pods that will be started to load balance this object store. Ignored if <code class="language-plaintext highlighter-rouge">allNodes</code> is true.</li>
  <li><code class="language-plaintext highlighter-rouge">allNodes</code>: Whether RGW pods should be started on all nodes. If true, a daemonset is created. If false, <code class="language-plaintext highlighter-rouge">instances</code> must be set.</li>
  <li><code class="language-plaintext highlighter-rouge">placement</code>: The Kubernetes placement settings to determine where the RGW pods should be started in the cluster.</li>
  <li><code class="language-plaintext highlighter-rouge">resources</code>: Set resource requests/limits for the Gateway Pod(s), see <a href="/docs/rook/v0.7/cluster-crd.html#resource-requirementslimits">Resource Requirements/Limits</a>.</li>
</ul>

    </div>
  </div>
</div>

<script>
  var menu = [];
  var BASE_PATH = "";

  function add(name, url, isChild, current) {
    var item = { name: name, url: url, current: current };
    var container = menu;
    if (isChild && menu.length > 0) {
      menu[menu.length-1].children = menu[menu.length-1].children || [];
      container = menu[menu.length-1].children;
      if (current) {
        menu[menu.length-1].childCurrent = true;
      }
    }
    container.push(item);
  }

  
    add(
      "Rook",
      "/docs/rook/v0.7/",
      false,
      false
    );
  
    add(
      "Quickstart",
      "/docs/rook/v0.7/quickstart.html",
      false,
      false
    );
  
    add(
      "Cleanup",
      "/docs/rook/v0.7/teardown.html",
      true,
      false
    );
  
    add(
      "Prerequisites",
      "/docs/rook/v0.7/k8s-pre-reqs.html",
      false,
      false
    );
  
    add(
      "Flex Volume Configuration",
      "/docs/rook/v0.7/flexvolume.html",
      true,
      false
    );
  
    add(
      "RBAC Security",
      "/docs/rook/v0.7/rbac.html",
      true,
      false
    );
  
    add(
      "Tectonic Bare Metal",
      "/docs/rook/v0.7/tectonic.html",
      true,
      false
    );
  
    add(
      "Storage",
      "/docs/rook/v0.7/storage.html",
      false,
      false
    );
  
    add(
      "Block Storage",
      "/docs/rook/v0.7/block.html",
      true,
      false
    );
  
    add(
      "Object Storage",
      "/docs/rook/v0.7/object.html",
      true,
      false
    );
  
    add(
      "Shared File System",
      "/docs/rook/v0.7/filesystem.html",
      true,
      false
    );
  
    add(
      "Custom Resources",
      "/docs/rook/v0.7/crds.html",
      false,
      false
    );
  
    add(
      "Cluster",
      "/docs/rook/v0.7/cluster-crd.html",
      true,
      false
    );
  
    add(
      "Pool",
      "/docs/rook/v0.7/pool-crd.html",
      true,
      false
    );
  
    add(
      "Object Store",
      "/docs/rook/v0.7/object-store-crd.html",
      true,
      true
    );
  
    add(
      "Shared File System",
      "/docs/rook/v0.7/filesystem-crd.html",
      true,
      false
    );
  
    add(
      "Monitoring",
      "/docs/rook/v0.7/monitoring.html",
      false,
      false
    );
  
    add(
      "Helm Charts",
      "/docs/rook/v0.7/helm.html",
      false,
      false
    );
  
    add(
      "Operator",
      "/docs/rook/v0.7/helm-operator.html",
      true,
      false
    );
  
    add(
      "Upgrades",
      "/docs/rook/v0.7/upgrade.html",
      false,
      false
    );
  
    add(
      "Tools",
      "/docs/rook/v0.7/tools.html",
      false,
      false
    );
  
    add(
      "Toolbox",
      "/docs/rook/v0.7/toolbox.html",
      true,
      false
    );
  
    add(
      "Rook Client",
      "/docs/rook/v0.7/client.html",
      true,
      false
    );
  
    add(
      "Advanced Configuration",
      "/docs/rook/v0.7/advanced-configuration.html",
      true,
      false
    );
  
    add(
      "Common Issues",
      "/docs/rook/v0.7/common-problems.html",
      true,
      false
    );
  
    add(
      "Contributing",
      "/docs/rook/v0.7/development-flow.html",
      false,
      false
    );
  
    add(
      "Multi-Node Test Environment",
      "/docs/rook/v0.7/development-environment.html",
      true,
      false
    );
  

  function getEntry(item) {
    var itemDom = document.createElement('li');

    if (item.current) {
      itemDom.innerHTML = item.name;
      itemDom.classList.add('current');
    } else {
      itemDom.innerHTML = '<a href="' + item.url + '">' + item.name + '</a>';
    }

    return itemDom;
  }

  // Flush css changes as explained in: https://stackoverflow.com/a/34726346
  // and more completely: https://stackoverflow.com/a/6956049
  function flushCss(element) {
    element.offsetHeight;
  }

  function addArrow(itemDom) {
    var MAIN_ITEM_HEIGHT = 24;
    var BOTTOM_PADDING = 20;
    var arrowDom = document.createElement('a');
    arrowDom.classList.add('arrow');
    arrowDom.innerHTML = '<img src="' + BASE_PATH + '/images/arrow.svg" />';
    arrowDom.onclick = function(itemDom) {
      return function () {
        // Calculated full height of the opened list
        var fullHeight = MAIN_ITEM_HEIGHT + BOTTOM_PADDING + itemDom.lastChild.clientHeight + 'px';

        itemDom.classList.toggle('open');

        if (itemDom.classList.contains('open')) {
          itemDom.style.height = fullHeight;
        } else {
          // If the list height is auto we have to set it to fullHeight
          // without tranistion before we shrink it to collapsed height
          if (itemDom.style.height === 'auto') {
            itemDom.style.transition = 'none';
            itemDom.style.height = fullHeight;
            flushCss(itemDom);
            itemDom.style.transition = '';
          }
          itemDom.style.height = MAIN_ITEM_HEIGHT + 'px';
        }

        return false;
      };
    }(itemDom);
    itemDom.appendChild(arrowDom);

    if ((item.current && item.children) || item.childCurrent) {
      itemDom.classList.add('open');
      itemDom.style.height = 'auto';
    } else {
      itemDom.style.height = MAIN_ITEM_HEIGHT + 'px';
    }
  }

  var menuDom = document.getElementById('docs-ul');
  for (var i = 0; i < menu.length; i++) {
    var item = menu[i];
    var itemDom = getEntry(item);

    if (item.childCurrent) {
      itemDom.classList.add('childCurrent');
    }

    if (item.children) {
      addArrow(itemDom);
      itemDom.classList.add('children');
      var children = document.createElement('ul');
      for (var j = 0; j < item.children.length; j++) {
        children.appendChild(getEntry(item.children[j]));
      }
      itemDom.appendChild(children);
    }
    menuDom.appendChild(itemDom);
  }
</script>
</div></main>
    <footer id="footer" aria-label="Footer">
  <div class="top">
    <a href="//www.cncf.io">
      <img
        class="cncf"
        src="/images/cncf.png"
        srcset="/images/cncf@2x.png 2x, /images/cncf@3x.png 3x" />
    </a>
    <p>We are a Cloud Native Computing Foundation graduated project.</p>
  </div>
  <div class="middle">
    <div class="grid-center">
      <div class="col_sm-12">
        <span>Getting Started</span>
        <a href="//github.com/rook/rook">GitHub</a>
        <a href="/docs/rook/v1.9/">Documentation</a>
        <a href="//github.com/rook/rook/blob/master/CONTRIBUTING.md#how-to-contribute">How to Contribute</a>
      </div>
      <div class="col_sm-12">
        <span>Community</span>
        <a href="//slack.rook.io/">Slack</a>
        <a href="//twitter.com/rook_io">Twitter</a>
        <a href="//groups.google.com/forum/#!forum/rook-dev">Forum</a>
        <a href="//blog.rook.io/">Blog</a>
      </div>
      <div class="col_sm-12">
        <span>Contact</span>
        <a href="mailto:cncf-rook-info@lists.cncf.io">Email</a>
        <a href="//github.com/rook/rook/issues">Feature request</a>
      </div>
      <div class="col_sm-12">
        <span>Top Contributors</span>
        <a href="//cloudical.io/">Cloudical</a>
        <a href="//cybozu.com">Cybozu, Inc</a>
        <a href="//www.redhat.com">Red Hat</a>
        <a href="//www.suse.com/">SUSE</a>
        <a href="//upbound.io">Upbound</a>
      </div>
    </div>
  </div>
  <div class="bottom">
    <div class="grid-center">
      <div class="col-8">
        <a class="logo" href="/">
          <img src="/images/rook-logo-small.svg" alt="rook.io" />
        </a>
        <p>
          &#169; Rook Authors 2022. Documentation distributed under
          <a href="https://creativecommons.org/licenses/by/4.0">CC-BY-4.0</a>.
        </p>
        <p>
          &#169; 2022 The Linux Foundation. All rights reserved. The Linux Foundation has
          registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our
          <a href="https://www.linuxfoundation.org/trademark-usage/">Trademark Usage</a> page.
        </p>
      </div>
    </div>
  </div>
</footer>


  <script src="/js/anchor.js"></script>
  <script>
    anchors.options = {
      placement: 'right',
      icon: '#',
    }

    document.addEventListener('DOMContentLoaded', function(event) {
      anchors.add('.docs-text h1, .docs-text h2, .docs-text h3, .docs-text h4, .docs-text h5, .docs-text h6');
    });
  </script>




    
  </body>
</html>
