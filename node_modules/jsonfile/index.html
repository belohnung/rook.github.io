


























<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />

    

    <title>Rook</title>

    <link rel="canonical" href="https://rook.io/node_modules/jsonfile/">

    <link rel="icon" href="/favicon.ico" />
<link rel="icon" type="image/png" href="/images/favicon_16x16.png" sizes="16x16" />
<link rel="icon" type="image/png" href="/images/favicon_32x32.png" sizes="32x32" />
<link rel="icon" type="image/png" href="/images/favicon_48x48.png" sizes="48x48" />
<link rel="icon" type="image/png" href="/images/favicon_192x192.png" sizes="192x192" />


    <link href="//fonts.googleapis.com/css?family=Montserrat:500|Open+Sans:300,400,600" rel="stylesheet">
    
    <link rel="stylesheet" href="/css/main.css">
    
  </head>
  <body>
    <nav id="navigation" aria-label="Navigation">
  <div>
    <div class="logo">
      <a href="/"><img src="/images/rook-logo.svg"/></a>
    </div>
    <div
      class="hamburger-controls"
      onclick="if (document.body.classList.contains('menu-open')) { document.body.classList.remove('menu-open') } else { document.body.classList.add('menu-open') }; return false;">
      <span></span> <span></span> <span></span>
    </div>
    <ul class="links">
      <li class="dropdown">
        <a role="button" href="javascript:void(0)">Documentation</a>
        <div class="dropdown-content">
          <a href="/docs/rook/v1.9/">Ceph</a>
          <a href="/docs/cassandra/v1.7/">Cassandra</a>
          <a href="/docs/nfs/v1.7/">NFS</a>
        </div>
      <li class="dropdown">
        <a role="button" href="javascript:void(0)">Community</a>
        <div class="dropdown-content">
          <a href="//github.com/rook/rook">GitHub</a>
          <a href="//slack.rook.io/">Slack</a>
          <a href="//groups.google.com/forum/#!forum/rook-dev">Forum</a>
          <a href="//twitter.com/rook_io">Twitter</a>
        </div>
      </li>
      <li><a href="//blog.rook.io/">Blog</a></li>
      <li><a class="button small" href="/docs/rook/v1.9/quickstart.html">Get Started</a></li>
    </ul>
  </div>
</nav>

    <main id="content" aria-label="Content"><div><h1 id="nodejs---jsonfile">Node.js - jsonfile</h1>

<p>Easily read/write JSON files.</p>

<p><a href="https://www.npmjs.org/package/jsonfile"><img src="https://img.shields.io/npm/v/jsonfile.svg?style=flat-square" alt="npm Package" /></a>
<a href="http://travis-ci.org/jprichardson/node-jsonfile"><img src="https://secure.travis-ci.org/jprichardson/node-jsonfile.svg" alt="build status" /></a>
<a href="https://ci.appveyor.com/project/jprichardson/node-jsonfile/branch/master"><img src="https://img.shields.io/appveyor/ci/jprichardson/node-jsonfile/master.svg?label=windows%20build" alt="windows Build status" /></a></p>

<p><a href="https://github.com/feross/standard"><img src="https://cdn.rawgit.com/feross/standard/master/sticker.svg" alt="Standard JavaScript" width="100" /></a></p>

<h2 id="why">Why?</h2>

<p>Writing <code class="language-plaintext highlighter-rouge">JSON.stringify()</code> and then <code class="language-plaintext highlighter-rouge">fs.writeFile()</code> and <code class="language-plaintext highlighter-rouge">JSON.parse()</code> with <code class="language-plaintext highlighter-rouge">fs.readFile()</code> enclosed in <code class="language-plaintext highlighter-rouge">try/catch</code> blocks became annoying.</p>

<h2 id="installation">Installation</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm install --save jsonfile
</code></pre></div></div>

<h2 id="api">API</h2>

<h3 id="readfilefilename-options-callback">readFile(filename, [options], callback)</h3>

<p><code class="language-plaintext highlighter-rouge">options</code> (<code class="language-plaintext highlighter-rouge">object</code>, default <code class="language-plaintext highlighter-rouge">undefined</code>): Pass in any <code class="language-plaintext highlighter-rouge">fs.readFile</code> options or set <code class="language-plaintext highlighter-rouge">reviver</code> for a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse">JSON reviver</a>.</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">throws</code> (<code class="language-plaintext highlighter-rouge">boolean</code>, default: <code class="language-plaintext highlighter-rouge">true</code>). If <code class="language-plaintext highlighter-rouge">JSON.parse</code> throws an error, pass this error to the callback.
  If <code class="language-plaintext highlighter-rouge">false</code>, returns <code class="language-plaintext highlighter-rouge">null</code> for the object.</li>
</ul>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">jsonfile</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">jsonfile</span><span class="dl">'</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">file</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">/tmp/data.json</span><span class="dl">'</span>
<span class="nx">jsonfile</span><span class="p">.</span><span class="nx">readFile</span><span class="p">(</span><span class="nx">file</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span>
<span class="p">})</span>
</code></pre></div></div>

<h3 id="readfilesyncfilename-options">readFileSync(filename, [options])</h3>

<p><code class="language-plaintext highlighter-rouge">options</code> (<code class="language-plaintext highlighter-rouge">object</code>, default <code class="language-plaintext highlighter-rouge">undefined</code>): Pass in any <code class="language-plaintext highlighter-rouge">fs.readFileSync</code> options or set <code class="language-plaintext highlighter-rouge">reviver</code> for a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse">JSON reviver</a>.</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">throws</code> (<code class="language-plaintext highlighter-rouge">boolean</code>, default: <code class="language-plaintext highlighter-rouge">true</code>). If an error is encountered reading or parsing the file, throw the error. If <code class="language-plaintext highlighter-rouge">false</code>, returns <code class="language-plaintext highlighter-rouge">null</code> for the object.</li>
</ul>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">jsonfile</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">jsonfile</span><span class="dl">'</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">file</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">/tmp/data.json</span><span class="dl">'</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">jsonfile</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="nx">file</span><span class="p">))</span>
</code></pre></div></div>

<h3 id="writefilefilename-obj-options-callback">writeFile(filename, obj, [options], callback)</h3>

<p><code class="language-plaintext highlighter-rouge">options</code>: Pass in any <code class="language-plaintext highlighter-rouge">fs.writeFile</code> options or set <code class="language-plaintext highlighter-rouge">replacer</code> for a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify">JSON replacer</a>. Can also pass in <code class="language-plaintext highlighter-rouge">spaces</code>.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">jsonfile</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">jsonfile</span><span class="dl">'</span><span class="p">)</span>

<span class="kd">var</span> <span class="nx">file</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">/tmp/data.json</span><span class="dl">'</span>
<span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span><span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">JP</span><span class="dl">'</span><span class="p">}</span>

<span class="nx">jsonfile</span><span class="p">.</span><span class="nx">writeFile</span><span class="p">(</span><span class="nx">file</span><span class="p">,</span> <span class="nx">obj</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
<span class="p">})</span>
</code></pre></div></div>

<p><strong>formatting with spaces:</strong></p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">jsonfile</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">jsonfile</span><span class="dl">'</span><span class="p">)</span>

<span class="kd">var</span> <span class="nx">file</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">/tmp/data.json</span><span class="dl">'</span>
<span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span><span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">JP</span><span class="dl">'</span><span class="p">}</span>

<span class="nx">jsonfile</span><span class="p">.</span><span class="nx">writeFile</span><span class="p">(</span><span class="nx">file</span><span class="p">,</span> <span class="nx">obj</span><span class="p">,</span> <span class="p">{</span><span class="na">spaces</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
<span class="p">})</span>
</code></pre></div></div>

<p><strong>appending to an existing JSON file:</strong></p>

<p>You can use <code class="language-plaintext highlighter-rouge">fs.writeFile</code> option <code class="language-plaintext highlighter-rouge">{flag: 'a'}</code> to achieve this.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">jsonfile</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">jsonfile</span><span class="dl">'</span><span class="p">)</span>

<span class="kd">var</span> <span class="nx">file</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">/tmp/mayAlreadyExistedData.json</span><span class="dl">'</span>
<span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span><span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">JP</span><span class="dl">'</span><span class="p">}</span>

<span class="nx">jsonfile</span><span class="p">.</span><span class="nx">writeFile</span><span class="p">(</span><span class="nx">file</span><span class="p">,</span> <span class="nx">obj</span><span class="p">,</span> <span class="p">{</span><span class="na">flag</span><span class="p">:</span> <span class="dl">'</span><span class="s1">a</span><span class="dl">'</span><span class="p">},</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
<span class="p">})</span>
</code></pre></div></div>

<h3 id="writefilesyncfilename-obj-options">writeFileSync(filename, obj, [options])</h3>

<p><code class="language-plaintext highlighter-rouge">options</code>: Pass in any <code class="language-plaintext highlighter-rouge">fs.writeFileSync</code> options or set <code class="language-plaintext highlighter-rouge">replacer</code> for a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify">JSON replacer</a>. Can also pass in <code class="language-plaintext highlighter-rouge">spaces</code>.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">jsonfile</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">jsonfile</span><span class="dl">'</span><span class="p">)</span>

<span class="kd">var</span> <span class="nx">file</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">/tmp/data.json</span><span class="dl">'</span>
<span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span><span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">JP</span><span class="dl">'</span><span class="p">}</span>

<span class="nx">jsonfile</span><span class="p">.</span><span class="nx">writeFileSync</span><span class="p">(</span><span class="nx">file</span><span class="p">,</span> <span class="nx">obj</span><span class="p">)</span>
</code></pre></div></div>

<p><strong>formatting with spaces:</strong></p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">jsonfile</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">jsonfile</span><span class="dl">'</span><span class="p">)</span>

<span class="kd">var</span> <span class="nx">file</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">/tmp/data.json</span><span class="dl">'</span>
<span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span><span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">JP</span><span class="dl">'</span><span class="p">}</span>

<span class="nx">jsonfile</span><span class="p">.</span><span class="nx">writeFileSync</span><span class="p">(</span><span class="nx">file</span><span class="p">,</span> <span class="nx">obj</span><span class="p">,</span> <span class="p">{</span><span class="na">spaces</span><span class="p">:</span> <span class="mi">2</span><span class="p">})</span>
</code></pre></div></div>

<p><strong>appending to an existing JSON file:</strong></p>

<p>You can use <code class="language-plaintext highlighter-rouge">fs.writeFileSync</code> option <code class="language-plaintext highlighter-rouge">{flag: 'a'}</code> to achieve this.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">jsonfile</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">jsonfile</span><span class="dl">'</span><span class="p">)</span>

<span class="kd">var</span> <span class="nx">file</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">/tmp/mayAlreadyExistedData.json</span><span class="dl">'</span>
<span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span><span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">JP</span><span class="dl">'</span><span class="p">}</span>

<span class="nx">jsonfile</span><span class="p">.</span><span class="nx">writeFileSync</span><span class="p">(</span><span class="nx">file</span><span class="p">,</span> <span class="nx">obj</span><span class="p">,</span> <span class="p">{</span><span class="na">flag</span><span class="p">:</span> <span class="dl">'</span><span class="s1">a</span><span class="dl">'</span><span class="p">})</span>
</code></pre></div></div>

<h3 id="spaces">spaces</h3>

<p>Global configuration to set spaces to indent JSON files.</p>

<p><strong>default:</strong> <code class="language-plaintext highlighter-rouge">null</code></p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">jsonfile</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">jsonfile</span><span class="dl">'</span><span class="p">)</span>

<span class="nx">jsonfile</span><span class="p">.</span><span class="nx">spaces</span> <span class="o">=</span> <span class="mi">4</span>

<span class="kd">var</span> <span class="nx">file</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">/tmp/data.json</span><span class="dl">'</span>
<span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span><span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">JP</span><span class="dl">'</span><span class="p">}</span>

<span class="c1">// json file has four space indenting now</span>
<span class="nx">jsonfile</span><span class="p">.</span><span class="nx">writeFile</span><span class="p">(</span><span class="nx">file</span><span class="p">,</span> <span class="nx">obj</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
<span class="p">})</span>
</code></pre></div></div>

<p>Note, it’s bound to <code class="language-plaintext highlighter-rouge">this.spaces</code>. So, if you do this:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">myObj</span> <span class="o">=</span> <span class="p">{}</span>
<span class="nx">myObj</span><span class="p">.</span><span class="nx">writeJsonSync</span> <span class="o">=</span> <span class="nx">jsonfile</span><span class="p">.</span><span class="nx">writeFileSync</span>
<span class="c1">// =&gt; this.spaces = null</span>
</code></pre></div></div>

<p>Could do the following:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">jsonfile</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">jsonfile</span><span class="dl">'</span><span class="p">)</span>
<span class="nx">jsonfile</span><span class="p">.</span><span class="nx">spaces</span> <span class="o">=</span> <span class="mi">4</span>
<span class="nx">jsonfile</span><span class="p">.</span><span class="nx">writeFileSync</span><span class="p">(</span><span class="nx">file</span><span class="p">,</span> <span class="nx">obj</span><span class="p">)</span> <span class="c1">// will have 4 spaces indentation</span>

<span class="kd">var</span> <span class="nx">myCrazyObj</span> <span class="o">=</span> <span class="p">{</span><span class="na">spaces</span><span class="p">:</span> <span class="mi">32</span><span class="p">}</span>
<span class="nx">myCrazyObj</span><span class="p">.</span><span class="nx">writeJsonSync</span> <span class="o">=</span> <span class="nx">jsonfile</span><span class="p">.</span><span class="nx">writeFileSync</span>
<span class="nx">myCrazyObj</span><span class="p">.</span><span class="nx">writeJsonSync</span><span class="p">(</span><span class="nx">file</span><span class="p">,</span> <span class="nx">obj</span><span class="p">)</span> <span class="c1">// will have 32 space indentation</span>
<span class="nx">myCrazyObj</span><span class="p">.</span><span class="nx">writeJsonSync</span><span class="p">(</span><span class="nx">file</span><span class="p">,</span> <span class="nx">obj</span><span class="p">,</span> <span class="p">{</span><span class="na">spaces</span><span class="p">:</span> <span class="mi">2</span><span class="p">})</span> <span class="c1">// will have only 2</span>
</code></pre></div></div>

<h2 id="license">License</h2>

<p>(MIT License)</p>

<p>Copyright 2012-2016, JP Richardson  <a href="mailto:jprichardson@gmail.com">jprichardson@gmail.com</a></p>
</div></main>
    <footer id="footer" aria-label="Footer">
  <div class="top">
    <a href="//www.cncf.io">
      <img
        class="cncf"
        src="/images/cncf.png"
        srcset="/images/cncf@2x.png 2x, /images/cncf@3x.png 3x" />
    </a>
    <p>We are a Cloud Native Computing Foundation graduated project.</p>
  </div>
  <div class="middle">
    <div class="grid-center">
      <div class="col_sm-12">
        <span>Getting Started</span>
        <a href="//github.com/rook/rook">GitHub</a>
        <a href="/docs/rook/v1.9/">Documentation</a>
        <a href="//github.com/rook/rook/blob/master/CONTRIBUTING.md#how-to-contribute">How to Contribute</a>
      </div>
      <div class="col_sm-12">
        <span>Community</span>
        <a href="//slack.rook.io/">Slack</a>
        <a href="//twitter.com/rook_io">Twitter</a>
        <a href="//groups.google.com/forum/#!forum/rook-dev">Forum</a>
        <a href="//blog.rook.io/">Blog</a>
      </div>
      <div class="col_sm-12">
        <span>Contact</span>
        <a href="mailto:cncf-rook-info@lists.cncf.io">Email</a>
        <a href="//github.com/rook/rook/issues">Feature request</a>
      </div>
      <div class="col_sm-12">
        <span>Top Contributors</span>
        <a href="//cloudical.io/">Cloudical</a>
        <a href="//cybozu.com">Cybozu, Inc</a>
        <a href="//www.redhat.com">Red Hat</a>
        <a href="//www.suse.com/">SUSE</a>
        <a href="//upbound.io">Upbound</a>
      </div>
    </div>
  </div>
  <div class="bottom">
    <div class="grid-center">
      <div class="col-8">
        <a class="logo" href="/">
          <img src="/images/rook-logo-small.svg" alt="rook.io" />
        </a>
        <p>
          &#169; Rook Authors 2022. Documentation distributed under
          <a href="https://creativecommons.org/licenses/by/4.0">CC-BY-4.0</a>.
        </p>
        <p>
          &#169; 2022 The Linux Foundation. All rights reserved. The Linux Foundation has
          registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our
          <a href="https://www.linuxfoundation.org/trademark-usage/">Trademark Usage</a> page.
        </p>
      </div>
    </div>
  </div>
</footer>





    
  </body>
</html>
